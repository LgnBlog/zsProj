(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84cbe2f2"],{"46e1":function(e,t,a){"use strict";var i=a("d91d"),n=a.n(i);n.a},"60ee":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"element-bda-table",class:"1"===e.$root.themeHomeChange?"element-bda-tableL":"element-bda-table"},[a("bda-scroll-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:e.tableHeight?e.tableHeight:null},on:{"selection-change":e.handleSelectionChange}},[e.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e.index?a("el-table-column",{attrs:{type:"index",label:"序号","header-align":"center",align:"center",width:"80"}}):e._e(),e._l(e.columnArray,(function(t){return a("el-table-column",{key:t.prop,attrs:{"show-overflow-tooltip":"",prop:t.prop,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(i){return["operate"===t.type?a("span",e._l(t.linkName,(function(t){return a("el-button",{key:t,attrs:{type:"text"},on:{click:function(a){return e.rowClick(i.row,t)}}},[e._v(e._s(t||""))])})),1):"link"===t.type?e._l(i.row[t.prop],(function(n){return a("div",{key:n[t.key]||""},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleLink(i.row,n)}}},[e._v(e._s(n.fileName||""))])],1)})):a("span",[e._v("\n                    "+e._s(i.row[t.prop])+"\n                ")])]}}],null,!0)})}))],2),a("div",{staticStyle:{"text-align":"center","margin-top":"8px"}},[a("el-pagination",{attrs:{"current-page":e.pagesRs.pageNo,"page-sizes":[10,20,30,40],"page-size":e.pagesRs.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagesRs.total},on:{"size-change":e.handleSizeChangeRs,"current-change":e.handleCurrentChangeRs}})],1)],1)},n=[],r=(a("c5f6"),{name:"element-bda-table",components:{},props:{tableData:{type:Array,default:function(){return[]}},columnArray:{type:Array,default:function(){return[]}},pageSize:{type:Number,default:function(){return 10}},pageNo:{type:Number,default:function(){return 1}},total:{type:Number,default:function(){return 0}},tableHeight:{type:Number,default:function(){return null}},selection:{type:Boolean,default:function(){return!1}},index:{type:Boolean,default:function(){return!0}}},watch:{tableData:{handler:function(e){this.tableData=e||[]},deep:!0,immediate:!0},pageSize:function(e){this.pagesRs.pageSize=e||10},pageNo:function(e){this.pagesRs.pageNo=e||1},total:function(e){this.pagesRs.total=e||0}},data:function(){return{pagesRs:{pageNo:1,pageSize:10,total:0}}},created:function(){},methods:{rowClick:function(e,t){var a=this;"删除"===t?this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("getRow",e,t)})).catch((function(){a.$message({type:"info",message:"已取消删除"})})):this.$emit("getRow",e,t)},handleLink:function(e,t){this.$emit("linkRow",e,t)},handleCurrentChangeRs:function(e){this.pagesRs.pageNo=e,this.$emit("getPageNo",e)},handleSizeChangeRs:function(e){this.pagesRs.pageSize=e,this.$emit("getPageSize",e)},handleSelectionChange:function(e){this.$emit("selectBox",e)}}}),l=r,o=(a("ffc9"),a("2877")),s=Object(o["a"])(l,i,n,!1,null,"7da33e47",null);t["a"]=s.exports},b5ca:function(e,t,a){},d91d:function(e,t,a){},f4fa:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addBusiness",class:"1"===e.$root.themeHomeChange?"addBusinessL":""},[a("div",{staticClass:"nav"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openAdd}},[e._v("新增")]),a("div",{staticStyle:{display:"inline-block",float:"right","margin-right":"10px"}},[a("bda-input",{staticStyle:{width:"200px","margin-right":"4px"},attrs:{clearable:"",placeholder:"请输入关键字查询"},model:{value:e.keyWords,callback:function(t){e.keyWords=t},expression:"keyWords"}}),a("bda-button",{on:{click:e.getDatas}},[e._v("查询")])],1)],1),a("div",{staticStyle:{height:"calc(100% - 36px)"}},[a("element-bda-table-page",{directives:[{name:"loading",rawName:"v-loading",value:e.dsLoading,expression:"dsLoading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",tableData:e.majorArray,columnArray:e.majorCol,pageSize:e.pagesRs.pageSize,pageNo:e.pagesRs.pageNo,total:e.pagesRs.total},on:{getRow:e.getMajorRow,getPageNo:e.changePageNo,getPageSize:e.changePageSize}})],1),a("bda-dialog",{attrs:{visible:e.dialogVisible,modal:!1,"close-on-click-modal":!1,title:"废改立计划值新增"},on:{close:e.closeDialog,cancel:e.closeDialog}},[a("div",{staticClass:"dialogBox"},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,rules:{},"label-width":"160px"}},[a("el-form-item",{attrs:{label:"业务部门",prop:"department",rules:{required:!0,message:"阶段名称不能为空",trigger:"blur"}}},[a("el-select",{staticClass:"inputJd",attrs:{placeholder:"请选择部门"},on:{change:e.departmentChange},model:{value:e.dynamicValidateForm.department,callback:function(t){e.$set(e.dynamicValidateForm,"department",t)},expression:"dynamicValidateForm.department"}},e._l(e.departmentArray,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{attrs:{label:"类型",prop:"typeVal",rules:{required:!0,message:"阶段名称不能为空",trigger:"blur"}}},[a("el-select",{staticClass:"inputJd",attrs:{placeholder:"类型"},model:{value:e.dynamicValidateForm.typeVal,callback:function(t){e.$set(e.dynamicValidateForm,"typeVal",t)},expression:"dynamicValidateForm.typeVal"}},[a("el-option",{attrs:{label:"废止",value:"废止"}}),a("el-option",{attrs:{label:"修订与新增",value:"修订与新增"}})],1)],1),a("el-form-item",{attrs:{label:"年份",prop:"yearData",rules:{required:!0,message:"年份不能为空",trigger:"blur"}}},[a("el-date-picker",{staticClass:"inputJd",attrs:{"value-format":"yyyy",type:"year",placeholder:"选择年"},model:{value:e.dynamicValidateForm.yearData,callback:function(t){e.$set(e.dynamicValidateForm,"yearData",t)},expression:"dynamicValidateForm.yearData"}})],1),a("el-form-item",{attrs:{prop:"domain",label:"计划值",rules:{required:!0,message:"计划值不能为空",trigger:"blur"}}},[a("bda-input",{staticClass:"inputJd",attrs:{placeholder:"请输入计划值"},model:{value:e.dynamicValidateForm.domain,callback:function(t){e.$set(e.dynamicValidateForm,"domain",t)},expression:"dynamicValidateForm.domain"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("bda-button",{attrs:{bdatype:"primary"},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v("重置")]),a("bda-button",{attrs:{bdatype:"defualt"},on:{click:e.closeDialog}},[e._v("关闭")])],1)])],1)},n=[],r=(a("7f7f"),a("60ee")),l=a("8986"),o={name:"addBusiness",mixins:[l["a"]],components:{elementBdaTablePage:r["a"]},props:[],data:function(){return{majorArray:[],majorCol:[],dsLoading:!1,pagesRs:{pageNo:1,pageSize:10,total:0},operatType:"新增",dialogVisible:!1,keyWords:"",rowId:"",departmentArray:[],dynamicValidateForm:{department:"",departmentName:"",typeVal:"",yearData:"",domain:""}}},mounted:function(){this.getDatas()},created:function(){this.getDepartment()},watch:{},methods:{getDepartment:function(){var e=this;this.department({}).then((function(t){e.departmentArray=t||[]}))},departmentChange:function(e){for(var t=0;t<this.departmentArray.length;t++)if(e===this.departmentArray[t].code)return void(this.dynamicValidateForm.departmentName=this.departmentArray[t].name)},changePageNo:function(e){this.pagesRs.pageNo=e,this.getDatas()},changePageSize:function(e){this.pagesRs.pageSize=e,this.getDatas()},getMajorRow:function(e,t){"删除"===t?this.deleteData(e):"编辑"===t&&(this.operatType=t,this.dialogVisible=!0,this.rowId=e.id||"",this.GetPhaseDetail(e))},deleteData:function(e){var t=this;this.fglDelete({id:e.id}).then((function(){t.getDatas()}))},GetPhaseDetail:function(e){var t=this;this.fglGet({id:e.id}).then((function(e){e&&(t.dynamicValidateForm.departmentName=e.department||"",t.dynamicValidateForm.department=e.departmentId||"",t.dynamicValidateForm.typeVal=e.type||"",t.dynamicValidateForm.yearData=e.year||"",t.dynamicValidateForm.domain=e.planValue||"")}))},editData:function(){var e=this,t={department:this.dynamicValidateForm.departmentName,departmentId:this.dynamicValidateForm.department,type:this.dynamicValidateForm.typeVal,year:this.dynamicValidateForm.yearData,planValue:this.dynamicValidateForm.domain,id:this.rowId};this.fglUpdate(t).then((function(){e.getDatas()})).finally((function(){e.dialogVisible=!1}))},openAdd:function(){this.operatType="新增",this.dialogVisible=!0},addSave:function(){var e=this;this.fglAdd({department:this.dynamicValidateForm.departmentName,departmentId:this.dynamicValidateForm.department,type:this.dynamicValidateForm.typeVal,year:this.dynamicValidateForm.yearData,planValue:this.dynamicValidateForm.domain}).then((function(){e.getDatas()})).finally((function(){e.dialogVisible=!1}))},getDatas:function(){var e=this;this.dsLoading=!0,this.majorCol=[{prop:"planValue",label:"计划值"},{prop:"type",label:"类型"},{prop:"department",label:"部门"},{prop:"createName",label:"创建人"},{prop:"createTime",label:"创建时间"},{prop:"updateTime",label:"更新时间"},{type:"operate",linkName:["编辑","删除"],label:"操作",width:"180"}],this.fglList({current:this.pagesRs.pageNo,size:this.pagesRs.pageSize,keyword:this.keyWords}).then((function(t){e.pagesRs.total=t.records,e.majorArray=t.rows||[]})).finally((function(){e.dsLoading=!1}))},closeDialog:function(){this.dialogVisible=!1,this.resetForm("dynamicValidateForm")},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e&"新增"===t.operatType)t.addSave();else{if(!(e&"编辑"===t.operatType))return!1;t.editData()}}))},resetForm:function(e){this.$refs[e].resetFields()}}},s=o,d=(a("46e1"),a("2877")),c=Object(d["a"])(s,i,n,!1,null,"6ae6bd10",null);t["default"]=c.exports},ffc9:function(e,t,a){"use strict";var i=a("b5ca"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-84cbe2f2.751c10b1.js.map