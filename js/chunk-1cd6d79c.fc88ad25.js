(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cd6d79c","chunk-b59e92e4"],{"270b":function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{class:"1"===t.$root.themeHomeChange?"defect-table_light":"defect-table",attrs:{id:"defect-table"}},[l("div",{staticClass:"header"},[l("span",[t._v("缺陷清单")]),l("div",{staticStyle:{"font-size":"12px","font-weight":"600"}},[l("span",[t._v("缺陷状态： ")]),l("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择"},on:{change:function(e){return t.getTableList(!0)}},model:{value:t.params.defectStatus,callback:function(e){t.$set(t.params,"defectStatus",e)},expression:"params.defectStatus"}},t._l(t.defectStatusOptions,(function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),l("div",{staticClass:"content"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"light",height:t.tableHeight,"row-key":t.rowKeyInit,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",selectable:t.selectInit,"reserve-selection":"",width:"55",align:"center"}}),l("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),l("el-table-column",{attrs:{prop:"ruleName",label:"规则名称","min-width":"150",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"ruleType",label:"规则分类",width:"100",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"department",label:"部门",width:"100",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"businessPhase",label:"业务阶段",width:"120",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"businessItem",label:"业务事项","min-width":"140",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"gzdy",label:"规则定义",align:"center","min-width":"120","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"riskLevel",label:"风险等级",width:"85",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"duty",label:"责任岗位",width:"105",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"wjtwsy",label:"文件条文索引","min-width":"180",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"defectStatus",label:"异常详情",width:"85",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{staticStyle:{cursor:"pointer",color:"#E6A23C","font-weight":"bold"},on:{click:function(l){return t.detailDialogClick(e.row)}}},[t._v("\n            异常\n          ")])]}}])}),l("el-table-column",{attrs:{prop:"defectStatus",label:"缺陷状态",width:"60",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{staticStyle:{color:"#49cfff","font-weight":"bold"}},[t._v(t._s(t.defectStatusOptions.find((function(t){return t.value==e.row.defectStatus})).label||"错误阶段"))])]}}])}),l("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"180",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.beginTime||"暂无")+" \n        ")]}}])}),l("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"180",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.updateTime||"暂无")+" \n        ")]}}])})],1),l("el-pagination",{attrs:{"current-page":t.params.currentPage,"page-sizes":[10,50,100,200],"page-size":t.params.pageSize,background:"",layout:"prev, pager, next, sizes, jumper, total",total:t.params.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),l("detail-dialog",{ref:"detailDialogRef",attrs:{tableData:t.detailInfo}})],1)},o=[],n=(l("7514"),l("ac6a"),l("b77c")),i=l("f0af"),r={name:"defect-table",components:{detailDialog:n["default"]},mixins:[i["a"]],props:{orderId:{type:String,default:function(){return""}},taskId:{type:String,default:function(){return""}},selectIds:{type:Array,default:function(){return[]}}},data:function(){return{tableHeight:.7*(window.innerHeight-170)-130,detailInfo:[],params:{pageSize:10,currentPage:1,total:0},defectStatus:"",defectStatusOptions:[{value:0,label:"待处理"},{value:1,label:"待取证"},{value:2,label:"待确认"},{value:3,label:"待整改"},{value:4,label:"已整改"},{value:5,label:"已完成"},{value:6,label:"已退回"},{value:7,label:"待举证"},{value:8,label:"举证中"},{value:9,label:"已取消"}],multipleSelection:[],tableLoading:!1,tableData:[]}},watch:{selectIds:{handler:function(t){window.console.log(t),Array.isArray(t)&&0!==t.length&&this.toggleSelection(t)},deep:!0,immediate:!1},taskId:{handler:function(){this.getTableList()},deep:!0,immediate:!1}},created:function(){},mounted:function(){},methods:{initData:function(){this.getTableList()},rowKeyInit:function(t){return t.defectId},getTableList:function(t){var e=this;t&&this.setPages();var l={defectStatus:this.params.defectStatus,current:this.params.currentPage,size:this.params.pageSize,orderId:this.orderId,taskId:this.taskId};this.tableData=[],this.tableLoading=!0,this.getDefectList(l).then((function(t){window.console.log(t),t?(e.tableData=t.rows,e.setPages(t.current,t.size,t.records)):e.setPages()})).finally((function(){e.tableLoading=!1}))},toggleSelection:function(t){var e=this;t?t.forEach((function(t){window.console.log(t,e.tableData),e.$refs.multipleTable.toggleRowSelection(e.tableData.find((function(e){return e.defectId===t})))})):this.$refs.multipleTable.clearSelection()},setPages:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.params["pageSize"]=e,this.params["currentPage"]=t,this.params["total"]=l},searchTableNames:function(t){var e=this,l="";return t.forEach((function(t){l+=e.tableData.find((function(e){return e.defectId==t.defectId})).ruleName+","})),l},handleSizeChange:function(t){this.params.pageSize=t,this.getTableList()},handleCurrentChange:function(t){this.params.currentPage=t,this.getTableList()},detailDialogClick:function(t){var e=this;this.getMonitorException({id:t.id}).then((function(t){Array.isArray(t)?e.detailInfo=t:e.detailInfo=[]})).catch((function(t){e.detailInfo=[],e.$message.error("异常详情报错： "+t.code)})).finally((function(){e.$refs.detailDialogRef.openDialog()}))},handleSelectionChange:function(t){this.multipleSelection=t,this.$emit("selectChange",t.map((function(t){return{id:t.defectId,defectStatus:t.defectStatus}})))},selectInit:function(t){var e=!0;return 0!=this.multipleSelection.length&&(e=this.multipleSelection.some((function(e){if(e.defectStatus===t.defectStatus&&5!==t.defectStatus)return!0}))),e}}},s=r,c=(l("9f6a"),l("6fde"),l("2877")),u=Object(c["a"])(s,a,o,!1,null,"dbbc23a8",null);e["default"]=u.exports},"6a32":function(t,e,l){},"6fde":function(t,e,l){"use strict";var a=l("6a32"),o=l.n(a);o.a},"7bce":function(t,e,l){"use strict";var a=l("b687"),o=l.n(a);o.a},"9f6a":function(t,e,l){"use strict";var a=l("f636"),o=l.n(a);o.a},b687:function(t,e,l){},b77c:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("bda-dialog",{class:"1"===t.$root.themeHomeChange?"detailDialog_light":"detailDialog",attrs:{visible:t.dialogVisible,modal:!1,"close-on-click-modal":!1,title:"异常明细"},on:{close:t.closeDialog,cancel:t.closeDialog}},[l("div",{staticClass:"dialogBox"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"light",border:""}},[l("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),l("el-table-column",{attrs:{prop:"dxbh",label:"对象编号","min-width":"100","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"dxmc",label:"对象名称","min-width":"100","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"gds",label:"供电分局","min-width":"100","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"yddz",label:"用电地址","min-width":"100","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"tq",label:"台区","min-width":"100","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"xmbh",label:"项目编号","min-width":"100","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"xmmc",label:"项目名称","min-width":"100","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","show-overflow-tooltip":"","min-width":"120"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("bda-button",{attrs:{bdatype:"defualt"},on:{click:t.closeDialog}},[t._v("关闭")])],1)])},o=[],n={props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1}},methods:{openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1}}},i=n,r=(l("7bce"),l("2877")),s=Object(r["a"])(i,a,o,!1,null,"52c28ece",null);e["default"]=s.exports},f636:function(t,e,l){}}]);
//# sourceMappingURL=chunk-1cd6d79c.fc88ad25.js.map