(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ab5a4598","chunk-26ff2546"],{"2bc8":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{placeholder:"请选择",clearable:e.clearable},on:{clear:e.clearHandle},model:{value:e.valueTitle,callback:function(t){e.valueTitle=t},expression:"valueTitle"}},[a("el-option",{staticClass:"options",attrs:{value:e.valueTitle,label:e.valueTitle}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:e.accordion,data:e.options,props:e.props,"node-key":e.props.value,"default-expanded-keys":e.defaultExpandedKey},on:{"node-click":e.handleNodeClick}})],1)],1)},r=[],n=(a("ac6a"),a("c5f6"),{name:"el-tree-select",props:{props:{type:Object,default:function(){return{value:"id",label:"title",children:"children"}}},options:{type:Array,default:function(){return[]}},value:{type:String,default:function(){return null}},clearable:{type:Boolean,default:function(){return!0}},accordion:{type:Boolean,default:function(){return!1}}},data:function(){return{valueId:null,valueTitle:"",defaultExpandedKey:[]}},mounted:function(){this.valueId=this.value,this.initHandle()},methods:{initHandle:function(){var e=this;this.valueId?setTimeout((function(){window.console.log(e.options),e.valueTitle=e.$refs.selectTree.getNode(Number(e.valueId)).data[e.props.label],e.$refs.selectTree.setCurrentKey(Number(e.valueId)),e.defaultExpandedKey=[e.valueId]}),500):this.valueTitle="",this.initScroll()},initScroll:function(){this.$nextTick((function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin: 0px; max-height: none; overflow: hidden;",t.forEach((function(e){return e.style.width=0}))}))},handleNodeClick:function(e,t){window.console.log(t),this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("getValue",[this.valueId,this.valueTitle]),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.valueId=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue",[this.valueId,this.valueTitle])},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach((function(e){return e.classList.remove("is-current")}))}},watch:{value:function(){this.valueId=this.value,this.initHandle()}}}),o=n,i=(a("dbcf"),a("2877")),s=Object(i["a"])(o,l,r,!1,null,"a35f4ec4",null);t["default"]=s.exports},"44da":function(e,t,a){"use strict";var l=a("b8f8"),r=a.n(l);r.a},"5a36":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"1"===e.$root.themeHomeChange?"planEntry_light":"planEntry"},[a("div",{staticClass:"planEntry-con"},[a("div",{staticClass:"headBox"},[a("span",{staticClass:"title"},[e._v(" 监督计划录入 ")]),a("bda-button",{on:{click:e.goBack}},[e._v("返回")])],1),a("div",{staticClass:"content"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px","label-suffix":"：","label-position":"left","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"监督类型",prop:"type"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.options["type"],(function(e,t){return a("bda-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"监督领域",prop:"jdly"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.form.jdly,callback:function(t){e.$set(e.form,"jdly",t)},expression:"form.jdly"}},e._l(e.options["jdly"],(function(e,t){return a("bda-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"单位名称",prop:"dwmc"}},[a("SelectTree",{ref:"selectTreeRef",staticStyle:{width:"100%"},attrs:{props:e.defaultProps,options:e.treeData,value:e.valueId,label:e.form.dwmc,clearable:!0,accordion:!0},on:{getValue:function(t){return e.getValue(t)}}})],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"配合部门",prop:"phbm"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",searchable:!1,placeholder:"请选择",size:"small"},model:{value:e.form.phbm,callback:function(t){e.$set(e.form,"phbm",t)},expression:"form.phbm"}},e._l(e.options["phbm"],(function(e,t){return a("bda-option",{key:t,attrs:{label:e.departmentName,value:e.departmentCode}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"年度",prop:"nd"}},[a("el-date-picker",{staticStyle:{"margin-right":"15px"},attrs:{type:"year",placeholder:"请选择年度","value-format":"yyyy"},model:{value:e.form.nd,callback:function(t){e.$set(e.form,"nd",t)},expression:"form.nd"}})],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"监督项目名称",prop:"jdxmmc"}},[a("el-input",{attrs:{placeholder:"请输入监督项目名称",clearable:"",size:"small"},model:{value:e.form.jdxmmc,callback:function(t){e.$set(e.form,"jdxmmc",t)},expression:"form.jdxmmc"}})],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"检查对象",prop:"jcdx"}},[a("el-input",{attrs:{placeholder:"请输入检查对象",clearable:"",size:"small"},model:{value:e.form.jcdx,callback:function(t){e.$set(e.form,"jcdx",t)},expression:"form.jcdx"}})],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"计划开展时间 (月份)",prop:"planDate"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input-number",{staticStyle:{width:"45%",margin:"0 auto"},attrs:{min:1,max:12,placeholder:"开始时间"},model:{value:e.form.jhsjBegin,callback:function(t){e.$set(e.form,"jhsjBegin",t)},expression:"form.jhsjBegin"}}),a("el-input-number",{staticStyle:{width:"45%",margin:"0 auto"},attrs:{min:1,max:12,placeholder:"结束时间"},model:{value:e.form.jhsjEnd,callback:function(t){e.$set(e.form,"jhsjEnd",t)},expression:"form.jhsjEnd"}})],1)])],1),a("el-col",{staticStyle:{height:"100px"},attrs:{span:24}},[a("bda-form-item",{attrs:{label:"监督内容",prop:"jdnr"}},[a("el-input",{attrs:{resize:"none",type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"请输入监督内容"},model:{value:e.form.jdnr,callback:function(t){e.$set(e.form,"jdnr",t)},expression:"form.jdnr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"开展方式",prop:"kzfs"}},[a("el-input",{attrs:{placeholder:"请输入开展方式",clearable:"",size:"small"},model:{value:e.form.kzfs,callback:function(t){e.$set(e.form,"kzfs",t)},expression:"form.kzfs"}})],1)],1),a("el-col",{attrs:{span:12}},[a("bda-form-item",{attrs:{label:"完成标志",prop:"wcbz"}},[a("el-input",{attrs:{placeholder:"请输入完成标志",clearable:"",size:"small"},model:{value:e.form.wcbz,callback:function(t){e.$set(e.form,"wcbz",t)},expression:"form.wcbz"}})],1)],1),a("el-col",{attrs:{span:24}},[a("bda-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{resize:"none",type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"请输入备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v(" 提交 ")]),a("el-button",{on:{click:function(t){return e.goBack()}}},[e._v(" 取消 ")])],1)],1)])])},r=[],n=a("1a48"),o=a("2bc8"),i={components:{SelectTree:o["default"]},mixins:[n["a"]],props:{formData_in:{type:Object,default:function(){return{}}}},data:function(){var e=this,t=function(t,a,l){return e.form.jhsjBegin&&e.form.jhsjEnd?e.form.jhsjBegin>e.form.jhsjEnd?l(new Error("计划开始时间不得大于计划结束时间")):l():l(new Error("请填写完整计划开展时间"))};return{defaultProps:{children:"list",label:"orgName",value:"orgId"},treeData:[],valueId:"",form:{dwmc:""},detailInfo:[],keyValue:"",chartData:{},infoLoading:!1,infoData:{},formLoading:!1,information_Loading:!1,tableData:[],pageInfoConfig:{page:1,rows:20,total:0},options:{type:[{label:"职能监督",value:"职能监督"},{label:"专业监督",value:"专业监督"},{label:"专责监督",value:"专责监督"},{label:"安全监督",value:"安全监督"},{label:"基层单位日常监督",value:"基层单位日常监督"}],phbm:[],jdly:[{label:"安全监管领域",value:"安全监管领域"},{label:"市场营销领域",value:"市场营销领域"},{label:"工程建设领域",value:"工程建设领域"},{label:"大党建办公综合领域",value:"大党建办公综合领域"},{label:"财务报销领域",value:"财务报销领域"},{label:"创新与数字化领域",value:"创新与数字化领域"},{label:"其他",value:"其他"}],gdfj:[{label:"古镇供电分局",value:"古镇供电分局"},{label:"三溪供电分局",value:"三溪供电分局"},{label:"大涌供电分局",value:"大涌供电分局"},{label:"石碑供电分局",value:"石碑供电分局"}]},rules:{type:[{required:!0,message:"请选择监督类型",trigger:"change"}],dwmc:[{required:!0,message:"请选择单位名称",trigger:"change"}],jdly:[{required:!1,message:"请选择监督领域",trigger:"change"}],nd:[{required:!0,message:"请选择年度",trigger:"change"}],qtbm:[{required:!0,message:"请选择牵头部门",trigger:"change"}],phbm:[{required:!1,message:"请选择配合部门",trigger:"change"}],jcdx:[{required:!0,message:"请输入检查对象",trigger:"blur"}],planDate:[{required:!0,validator:t,trigger:"blur"}],jdxmmc:[{required:!0,message:"请输入监督项目名称",trigger:"blur"}],jdnr:[{required:!0,message:"请输入监督内容",trigger:"blur"}],kzfs:[{required:!1,message:"请输入开展方式",trigger:"blur"}],wcbz:[{required:!1,message:"请输入完成标志",trigger:"blur"}],remark:[{required:!1,message:"请输入备注",trigger:"blur"}]}}},created:function(){this.init()},mounted:function(){},watch:{formData_in:{handler:function(e){this.form=JSON.parse(JSON.stringify(e))||{dwmc:""},this.valueId=e.dwbm||""},immediate:!0,deep:!0}},methods:{init:function(){this.getOrgData(),this.getPhbmData()},getOrgData:function(){var e=this;this.getSupervisionUnitTree().then((function(t){Array.isArray(t)&&0!==t.length?e.treeData=t:e.treeData=[]})).finally((function(){}))},getPhbmData:function(){var e=this;this.supervisionCoordinate().then((function(t){Array.isArray(t)&&0!==t.length?e.options["phbm"]=t:e.options["phbm"]=[]})).finally((function(){}))},getValue:function(e){this.form.dwbm=e[0],this.form.dwmc=e[1]},submit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.$confirm("此操作将 ".concat(e.form.id?"编辑":"录入"," 当前监督计划, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.formLoading=!0,e[e.form.id?"supervisionUpdate":"supervisionInsert"](e.form).then((function(){e.$message.success("提交成功"),e.goBack()})).finally((function(){e.formLoading=!1}))})).catch((function(){}))}))},goBack:function(){this.$emit("closeDilag")}}},s=i,c=(a("44da"),a("2877")),u=Object(c["a"])(s,l,r,!1,null,"517b9589",null);t["default"]=u.exports},6009:function(e,t,a){},b8f8:function(e,t,a){},dbcf:function(e,t,a){"use strict";var l=a("6009"),r=a.n(l);r.a}}]);
//# sourceMappingURL=chunk-ab5a4598.b1146b45.js.map