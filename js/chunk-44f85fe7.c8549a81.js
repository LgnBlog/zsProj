(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44f85fe7"],{"4d73":function(e,t,a){},"541b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addBusiness",class:"1"===e.$root.themeHomeChange?"addBusinessL":""},[a("div",{staticClass:"nav"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openAdd}},[e._v("新增业务阶段")])],1),a("div",{staticStyle:{height:"calc(100% - 36px)"}},[a("element-bda-table-page",{directives:[{name:"loading",rawName:"v-loading",value:e.dsLoading,expression:"dsLoading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",tableData:e.majorArray,columnArray:e.majorCol,pageSize:e.pagesRs.pageSize,pageNo:e.pagesRs.pageNo,total:e.pagesRs.total},on:{getRow:e.getMajorRow,getPageNo:e.changePageNo,getPageSize:e.changePageSize}})],1),a("bda-dialog",{attrs:{visible:e.dialogVisible,modal:!1,"close-on-click-modal":!1,title:"业务阶段新增"},on:{close:e.closeDialog,cancel:e.closeDialog}},[a("div",{staticClass:"dialogBox"},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"160px"}},[e._l(e.dynamicValidateForm.domains,(function(t,i){return a("el-form-item",{key:t.key,attrs:{label:"阶段名称",prop:"domains."+i+".value",rules:{required:!0,message:"阶段名称不能为空",trigger:"blur"}}},[a("bda-input",{staticClass:"inputJd",model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),0!=i?a("el-button",{staticClass:"jdBtn",on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")]):e._e()],1)})),a("el-form-item",[a("el-button",{on:{click:e.addDomain}},[e._v("新增阶段")]),a("el-button",{on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v("重置")])],1)],2)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("bda-button",{attrs:{bdatype:"primary"},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v("保存")]),a("bda-button",{attrs:{bdatype:"defualt"},on:{click:e.closeDialog}},[e._v("关闭")])],1)]),a("bda-dialog",{attrs:{visible:e.dialogVisibleEdit,modal:!1,"close-on-click-modal":!1,title:"业务阶段编辑"},on:{close:e.closeDialog2,cancel:e.closeDialog2}},[a("div",{staticClass:"dialogBox"},[a("el-form",{ref:"editForm",staticClass:"demo-dynamic",attrs:{model:e.editForm,"label-width":"160px",rules:e.rules}},[a("el-form-item",{attrs:{label:"阶段名称",prop:"editValue"}},[a("bda-input",{staticClass:"inputJd",model:{value:e.editForm.editValue,callback:function(t){e.$set(e.editForm,"editValue",t)},expression:"editForm.editValue"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("bda-button",{attrs:{bdatype:"primary"},on:{click:function(t){return e.submitForm2("editForm")}}},[e._v("保存")]),a("bda-button",{attrs:{bdatype:"defualt"},on:{click:e.closeDialog2}},[e._v("关闭")])],1)])],1)},n=[],o=a("60ee"),l=a("8986"),s={name:"addBusiness",mixins:[l["a"]],components:{elementBdaTablePage:o["a"]},props:[],data:function(){return{majorArray:[],majorCol:[],dsLoading:!1,pagesRs:{pageNo:1,pageSize:10,total:0},dialogVisibleEdit:!1,editId:"",editForm:{editValue:""},rules:{editValue:[{required:!0,message:"阶段名称不能为空",trigger:"blur"}]},dialogVisible:!1,dynamicValidateForm:{domains:[{value:"",key:Date.now()}]}}},mounted:function(){this.getDatas()},created:function(){},watch:{},methods:{changePageNo:function(e){this.pagesRs.pageNo=e,this.getDatas()},changePageSize:function(e){this.pagesRs.pageSize=e,this.getDatas()},getMajorRow:function(e,t){"删除"===t?this.deleteData(e):"编辑"===t&&(this.dialogVisibleEdit=!0,this.editId=e.ywjdId||"",this.GetPhaseDetail(e)),window.console.log(e,t)},deleteData:function(e){var t=this;this.phaseDelete({phaseId:e.ywjdId}).then((function(){t.getDatas()}))},GetPhaseDetail:function(e){var t=this;this.getPhaseDetail({phaseId:e.ywjdId}).then((function(e){t.editForm.editValue=e.ywjdName||""}))},editData:function(){var e=this,t={ywjdId:this.editId,ywjdName:this.editForm.editValue};this.updatePhase(t).then((function(){e.getDatas()})).finally((function(){e.dialogVisibleEdit=!1}))},openAdd:function(){this.dialogVisible=!0},addSave:function(){var e=this,t=[];t=this.dynamicValidateForm.domains.map((function(e){return e.value})),this.phaseAdd({businessPhases:t}).then((function(){e.getDatas()})).finally((function(){e.dialogVisible=!1}))},getDatas:function(){var e=this;this.dsLoading=!0,this.majorCol=[{prop:"ywjdName",label:"业务阶段"},{prop:"createUser",label:"创建人"},{prop:"createTime",label:"创建时间"},{prop:"updateTime",label:"更新时间"},{type:"operate",linkName:["编辑","删除"],label:"操作",width:"180"}],this.getPhaseList({current:this.pagesRs.pageNo,size:this.pagesRs.pageSize}).then((function(t){e.pagesRs.total=t.records,e.majorArray=t.rows||[]})).finally((function(){e.dsLoading=!1}))},closeDialog:function(){this.dialogVisible=!1,this.dynamicValidateForm={domains:[{value:"",key:Date.now()}]}},closeDialog2:function(){this.dialogVisibleEdit=!1,this.editForm.editValue=""},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.addSave()}))},submitForm2:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.editData()}))},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},addDomain:function(){this.dynamicValidateForm.domains.push({value:"",key:Date.now()})}}},r=s,d=(a("e51d"),a("2877")),c=Object(d["a"])(r,i,n,!1,null,"c5085b16",null);t["default"]=c.exports},"60ee":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"element-bda-table",class:"1"===e.$root.themeHomeChange?"element-bda-tableL":"element-bda-table"},[a("bda-scroll-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:e.tableHeight?e.tableHeight:null},on:{"selection-change":e.handleSelectionChange}},[e.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e.index?a("el-table-column",{attrs:{type:"index",label:"序号","header-align":"center",align:"center",width:"80"}}):e._e(),e._l(e.columnArray,(function(t){return a("el-table-column",{key:t.prop,attrs:{"show-overflow-tooltip":"",prop:t.prop,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(i){return["operate"===t.type?a("span",e._l(t.linkName,(function(t){return a("el-button",{key:t,attrs:{type:"text"},on:{click:function(a){return e.rowClick(i.row,t)}}},[e._v(e._s(t||""))])})),1):"link"===t.type?e._l(i.row[t.prop],(function(n){return a("div",{key:n[t.key]||""},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleLink(i.row,n)}}},[e._v(e._s(n.fileName||""))])],1)})):a("span",[e._v("\n                    "+e._s(i.row[t.prop])+"\n                ")])]}}],null,!0)})}))],2),a("div",{staticStyle:{"text-align":"center","margin-top":"8px"}},[a("el-pagination",{attrs:{"current-page":e.pagesRs.pageNo,"page-sizes":[10,20,30,40],"page-size":e.pagesRs.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagesRs.total},on:{"size-change":e.handleSizeChangeRs,"current-change":e.handleCurrentChangeRs}})],1)],1)},n=[],o=(a("c5f6"),{name:"element-bda-table",components:{},props:{tableData:{type:Array,default:function(){return[]}},columnArray:{type:Array,default:function(){return[]}},pageSize:{type:Number,default:function(){return 10}},pageNo:{type:Number,default:function(){return 1}},total:{type:Number,default:function(){return 0}},tableHeight:{type:Number,default:function(){return null}},selection:{type:Boolean,default:function(){return!1}},index:{type:Boolean,default:function(){return!0}}},watch:{tableData:{handler:function(e){this.tableData=e||[]},deep:!0,immediate:!0},pageSize:function(e){this.pagesRs.pageSize=e||10},pageNo:function(e){this.pagesRs.pageNo=e||1},total:function(e){this.pagesRs.total=e||0}},data:function(){return{pagesRs:{pageNo:1,pageSize:10,total:0}}},created:function(){},methods:{rowClick:function(e,t){var a=this;"删除"===t?this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("getRow",e,t)})).catch((function(){a.$message({type:"info",message:"已取消删除"})})):this.$emit("getRow",e,t)},handleLink:function(e,t){this.$emit("linkRow",e,t)},handleCurrentChangeRs:function(e){this.pagesRs.pageNo=e,this.$emit("getPageNo",e)},handleSizeChangeRs:function(e){this.pagesRs.pageSize=e,this.$emit("getPageSize",e)},handleSelectionChange:function(e){this.$emit("selectBox",e)}}}),l=o,s=(a("ffc9"),a("2877")),r=Object(s["a"])(l,i,n,!1,null,"7da33e47",null);t["a"]=r.exports},b5ca:function(e,t,a){},e51d:function(e,t,a){"use strict";var i=a("4d73"),n=a.n(i);n.a},ffc9:function(e,t,a){"use strict";var i=a("b5ca"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-44f85fe7.c8549a81.js.map