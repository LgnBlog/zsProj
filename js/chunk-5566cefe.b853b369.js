(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5566cefe","chunk-2d22bf25"],{4031:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"1"===e.$root.themeHomeChange?"defectView_light":"defectView"},[a("el-form",{staticClass:"selectBox",attrs:{inline:!0,model:e.params}},[a("span",[a("el-form-item",{attrs:{label:"缺陷等级: "}},[a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择",clearable:""},on:{change:function(t){return e.queryTableList(!0)}},model:{value:e.params.defectLevel,callback:function(t){e.$set(e.params,"defectLevel",t)},expression:"params.defectLevel"}},[a("el-option",{attrs:{label:"轻微缺陷",value:"轻微缺陷"}}),a("el-option",{attrs:{label:"一般缺陷",value:"一般缺陷"}}),a("el-option",{attrs:{label:"较大缺陷",value:"较大缺陷"}}),a("el-option",{attrs:{label:"重大缺陷",value:"重大缺陷"}})],1)],1),a("el-form-item",{attrs:{label:"责任部门: "}},[a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择",clearable:""},on:{change:function(t){return e.queryTableList(!0)}},model:{value:e.params.department,callback:function(t){e.$set(e.params,"department",t)},expression:"params.department"}},e._l(e.departmentList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.departmentName,value:e.departmentCode}})})),1)],1),a("el-form-item",{attrs:{label:"单据时间"}},[a("el-date-picker",{staticStyle:{width:"220px"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:function(t){return e.queryTableList(!0)}},model:{value:e.params.djsj,callback:function(t){e.$set(e.params,"djsj",t)},expression:"params.djsj"}})],1)],1),a("el-form-item",[a("bda-search-input",{attrs:{placeholder:"请输入关键字",size:"mini"},on:{search:function(t){return e.queryTableList(!0)},clear:function(t){return e.queryTableList(!0)}},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}})],1)],1),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"orderId",label:"单据编号",width:"150",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"name",label:"任务 / 单据名称","min-width":"180",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"defectLevel",label:"缺陷等级",width:"130",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"orderStatus",label:"事件状态",width:"130",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"department",label:"责任部门",width:"130",align:"center"}}),a("el-table-column",{attrs:{prop:"orderDate",label:"单据日期",width:"120",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleClick(t.row,"detail")}}},[e._v("查看详情")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.params.currentPage,"page-sizes":[10,50,100,200],"page-size":e.params.pageSize,background:"",layout:"prev, pager, next, sizes, jumper, total",total:e.params.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},r=[],o=(a("7f7f"),a("f0af")),i={name:"defectView",mixins:[o["a"]],props:{title:{type:String,default:function(){return"智能组件"}},data:{type:Array,default:function(){return[]}}},data:function(){return{tableLoading:!1,tableHeight:window.innerHeight-175,departmentList:[],params:{pageSize:10,currentPage:1,total:0},tableData:[]}},created:function(){this.queryTableList(!0),this.getDepartmentList()},watch:{},mounted:function(){},methods:{getDepartmentList:function(){var e=this;this.getDisposalSelect().then((function(t){e.departmentList=t||[]})).finally((function(){}))},queryTableList:function(e){var t=this;e&&this.setPages();var a={begin:Array.isArray(this.params.djsj)&&this.params.djsj[0]?this.params.djsj[0]:"",end:Array.isArray(this.params.djsj)&&this.params.djsj[1]?this.params.djsj[1]:"",current:this.params.currentPage,size:this.params.pageSize,keyword:this.params.keyword,department:this.params.department,defectLevel:this.params.defectLevel};this.tableData=[],this.tableLoading=!0,this.getOrderList(a).then((function(e){window.console.log(e),e?(t.tableData=e.rows,t.setPages(e.current,e.size,e.records)):t.setPages()})).finally((function(){t.tableLoading=!1}))},setPages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.params["pageSize"]=t,this.params["currentPage"]=e,this.params["total"]=a},handleClick:function(e,t){window.console.log("类型：".concat(t," , 行内容:"),e),this.$router.push({path:"/details",query:{index:"4-2",params:window.btoa(window.encodeURIComponent(JSON.stringify({name:e.name,orderId:e.orderId||this.$route.query.orderId}))),actNav:this.$route.query.actNav}})},handleSizeChange:function(e){this.params.pageSize=e,this.queryTableList()},handleCurrentChange:function(e){this.params.currentPage=e,this.queryTableList()}}},l=i,s=(a("5089"),a("2877")),c=Object(s["a"])(l,n,r,!1,null,"c4199cba",null);t["default"]=c.exports},5089:function(e,t,a){"use strict";var n=a("81ad"),r=a.n(n);r.a},"81ad":function(e,t,a){},f0af:function(e,t,a){"use strict";var n=a("db49"),r=a("ab3e"),o=n["b"]+"/disposal/orders";function i(e){return Object(r["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:o})}var l=n["b"]+"/disposal/select";function s(e){return Object(r["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e,url:l})}var c=n["b"]+"/disposal/defect/list";function u(e){return Object(r["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e,url:c})}var d=n["b"]+"/disposal/task";function p(e){return Object(r["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e,url:d})}var h=n["b"]+"/disposal/file/upload";function f(e){return Object(r["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:h})}var m=n["b"]+"/disposal/forensics/process";function b(e){return Object(r["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:m})}var g=n["b"]+"/disposal/monitor/exception";function w(e){return Object(r["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e,url:g})}var y=n["b"]+"/disposal/process/detail";function v(e){return Object(r["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:y})}var j=n["b"]+"/disposal/rectify/process";function T(e){return Object(r["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:j})}var L=n["b"]+"/disposal/process/revise/selected";function C(e){return Object(r["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:L})}var k=n["b"]+"/disposal/file/download";function x(e){return Object(r["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e,url:k})}t["a"]={data:function(){return{disposalCenter:{list:[],page:null,limit:null,total:0,model:null}}},methods:{getOrderList:function(e){return i(e).then((function(e){return e}))},getDisposalSelect:function(e){return s(e).then((function(e){return e}))},getDefectList:function(e){return u(e).then((function(e){return e}))},getDisposalTaskInfo:function(e){return p(e).then((function(e){return e}))},disposalFileUpload:function(e){return f(e).then((function(e){return e}))},forensicsProcess:function(e){return b(e).then((function(e){return e}))},getMonitorException:function(e){return w(e).then((function(e){return e}))},getProcessDetail:function(e){return v(e).then((function(e){return e}))},rectifyProcess:function(e){return T(e).then((function(e){return e}))},getProcessReviseTable:function(e){return C(e).then((function(e){return e}))},fileDownload:function(e){return x(e).then((function(e){return e}))}}}}}]);
//# sourceMappingURL=chunk-5566cefe.b853b369.js.map