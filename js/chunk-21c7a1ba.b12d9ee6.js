(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21c7a1ba","chunk-77228c2d","chunk-2d22bf25"],{"6ce1":function(t,e,a){},"911b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"1"===t.$root.themeHomeChange?"minorDefectManagement_light":"minorDefectManagement",attrs:{id:"minorDefectManagement"}},[a("div",{staticClass:"header"},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("缺陷清单")]),a("div",{staticStyle:{"font-size":"12px","font-weight":"500"}},[a("span",[t._v("缺陷状态： ")]),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择"},on:{change:function(e){return t.getTableList(!0)}},model:{value:t.params.defectStatus,callback:function(e){t.$set(t.params,"defectStatus",e)},expression:"params.defectStatus"}},t._l(t.defectStatusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"light",height:t.tableHeight,"row-key":t.rowKeyInit,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"taskName",label:"任务名称","min-width":"150",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"ruleName",label:"规则名称","min-width":"150",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"ruleType",label:"规则分类",width:"100",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"department",label:"部门",width:"100",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"businessPhase",label:"业务阶段",width:"120",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"businessItem",label:"业务事项","min-width":"140",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"riskLevel",label:"风险等级",width:"85",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"duty",label:"责任岗位",width:"105",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"wjtwsy",label:"文件条文索引","min-width":"180",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"defectStatus",label:"异常详情",width:"85",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{cursor:"pointer",color:"#E6A23C","font-weight":"bold"},on:{click:function(a){return t.detailDialogClick(e.row)}}},[t._v("\n            异常\n          ")])]}}])}),a("el-table-column",{attrs:{prop:"defectStatus",label:"缺陷状态",width:"60",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#49cfff","font-weight":"bold"}},[t._v(t._s(t.defectStatusOptions.find((function(t){return t.value==e.row.defectStatus})).label||"错误阶段"))])]}}])}),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"180",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.beginTime||"暂无")+" \n        ")]}}])}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"180",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.updateTime||"暂无")+" \n        ")]}}])})],1),a("el-pagination",{attrs:{"current-page":t.params.currentPage,"page-sizes":[10,50,100,200],"page-size":t.params.pageSize,background:"",layout:"prev, pager, next, sizes, jumper, total",total:t.params.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("detail-dialog",{ref:"detailDialogRef",attrs:{tableData:t.detailInfo}})],1)},o=[],l=(a("7514"),a("ac6a"),a("e466")),i=a("f0af"),r={name:"minorDefectManagement",components:{detailDialog:l["default"]},mixins:[i["a"]],props:{orderId:{type:String,default:function(){return""}}},data:function(){return{tableHeight:window.innerHeight-190,detailInfo:[],params:{pageSize:10,currentPage:1,total:0},defectStatus:"",defectStatusOptions:[{value:0,label:"待处理"},{value:1,label:"待取证"},{value:2,label:"待确认"},{value:3,label:"待整改"},{value:4,label:"已整改"},{value:5,label:"已完成"},{value:6,label:"已退回"},{value:7,label:"待举证"},{value:8,label:"举证中"},{value:9,label:"已取消"}],multipleSelection:[],tableLoading:!1,tableData:[]}},watch:{},created:function(){this.initData()},mounted:function(){},methods:{initData:function(){this.getTableList()},rowKeyInit:function(t){return t.defectId},getTableList:function(t){var e=this;t&&this.setPages();var a={defectStatus:this.params.defectStatus,current:this.params.currentPage,size:this.params.pageSize};this.tableData=[],this.tableLoading=!0,this.getDefectList(a).then((function(t){window.console.log(t),t?(e.tableData=t.rows,e.setPages(t.current,t.size,t.records)):e.setPages()})).finally((function(){e.tableLoading=!1}))},toggleSelection:function(t){var e=this;t?t.forEach((function(t){window.console.log(t,e.tableData),e.$refs.multipleTable.toggleRowSelection(e.tableData.find((function(e){return e.defectId===t})))})):this.$refs.multipleTable.clearSelection()},setPages:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.params["pageSize"]=e,this.params["currentPage"]=t,this.params["total"]=a},searchTableNames:function(t){var e=this,a="";return t.forEach((function(t){a+=e.tableData.find((function(e){return e.defectId==t.defectId})).ruleName+","})),a},handleSizeChange:function(t){this.params.pageSize=t,this.getTableList()},handleCurrentChange:function(t){this.params.currentPage=t,this.getTableList()},detailDialogClick:function(t){var e=this;this.getMonitorException({id:t.ruleId}).then((function(t){Array.isArray(t)?e.detailInfo=t:e.detailInfo=[]})).catch((function(t){e.detailInfo=[],e.$message.error("异常详情报错： "+t.code)})).finally((function(){e.$refs.detailDialogRef.openDialog()}))},handleSelectionChange:function(t){window.console.log(t),this.multipleSelection=t,this.$emit("selectChange",t.map((function(t){return{id:t.defectId,defectStatus:t.defectStatus}})))},selectInit:function(t){var e=!0;return 0!=this.multipleSelection.length&&(e=this.multipleSelection.some((function(e){if(e.defectStatus===t.defectStatus&&5!==t.defectStatus)return!0}))),e}}},s=r,c=(a("e1c7"),a("a2b9"),a("2877")),u=Object(c["a"])(s,n,o,!1,null,"a290c3f2",null);e["default"]=u.exports},a2b9:function(t,e,a){"use strict";var n=a("6ce1"),o=a.n(n);o.a},b3f1:function(t,e,a){},cef5:function(t,e,a){},e1c7:function(t,e,a){"use strict";var n=a("cef5"),o=a.n(n);o.a},e466:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("bda-dialog",{class:"1"===t.$root.themeHomeChange?"detailDialog_light":"detailDialog",attrs:{visible:t.dialogVisible,modal:!1,"close-on-click-modal":!1,title:"异常明细"},on:{close:t.closeDialog,cancel:t.closeDialog}},[a("div",{staticClass:"dialogBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"light",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"dxbh",label:"对象编号","min-width":"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"dxmc",label:"对象名称","min-width":"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"gds",label:"供电分局","min-width":"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"yddz",label:"用电地址","min-width":"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"tq",label:"台区","min-width":"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"xmbh",label:"项目编号","min-width":"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"xmmc",label:"项目名称","min-width":"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","show-overflow-tooltip":"","min-width":"120"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("bda-button",{attrs:{bdatype:"defualt"},on:{click:t.closeDialog}},[t._v("关闭")])],1)])},o=[],l={props:{tableData:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1}},methods:{openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1}}},i=l,r=(a("e493"),a("2877")),s=Object(r["a"])(i,n,o,!1,null,"9aab836a",null);e["default"]=s.exports},e493:function(t,e,a){"use strict";var n=a("b3f1"),o=a.n(n);o.a},f0af:function(t,e,a){"use strict";var n=a("db49"),o=a("ab3e"),l=n["b"]+"/disposal/orders";function i(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:l})}var r=n["b"]+"/disposal/select";function s(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:r})}var c=n["b"]+"/disposal/defect/list";function u(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:c})}var d=n["b"]+"/disposal/task";function f(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:d})}var p=n["b"]+"/disposal/file/upload";function h(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:p})}var b=n["b"]+"/disposal/forensics/process";function g(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:b})}var m=n["b"]+"/disposal/monitor/exception";function w(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:m})}var v=n["b"]+"/disposal/process/detail";function S(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:v})}var y=n["b"]+"/disposal/rectify/process";function T(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:y})}var D=n["b"]+"/disposal/process/revise/selected";function C(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:D})}var k=n["b"]+"/disposal/file/download";function x(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:k})}e["a"]={data:function(){return{disposalCenter:{list:[],page:null,limit:null,total:0,model:null}}},methods:{getOrderList:function(t){return i(t).then((function(t){return t}))},getDisposalSelect:function(t){return s(t).then((function(t){return t}))},getDefectList:function(t){return u(t).then((function(t){return t}))},getDisposalTaskInfo:function(t){return f(t).then((function(t){return t}))},disposalFileUpload:function(t){return h(t).then((function(t){return t}))},forensicsProcess:function(t){return g(t).then((function(t){return t}))},getMonitorException:function(t){return w(t).then((function(t){return t}))},getProcessDetail:function(t){return S(t).then((function(t){return t}))},rectifyProcess:function(t){return T(t).then((function(t){return t}))},getProcessReviseTable:function(t){return C(t).then((function(t){return t}))},fileDownload:function(t){return x(t).then((function(t){return t}))}}}}}]);
//# sourceMappingURL=chunk-21c7a1ba.b12d9ee6.js.map