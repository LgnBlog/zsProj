(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2c170ac"],{"0489":function(e,t,a){"use strict";var r=a("f0a3"),o=a.n(r);o.a},b118:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("bda-dialog",{class:"1"===e.$root.themeHomeChange?"dialogGzLight":"",attrs:{visible:e.dialogVisible,modal:!1,"close-on-click-modal":!1,title:"新增规则"},on:{close:e.closeDialog,cancel:e.closeDialog}},[a("div",{staticClass:"dialogBox"},[a("el-form",{ref:"forms",attrs:{model:e.formData,rules:e.rules,"label-width":"84px","label-suffix":"："}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"规则名称",prop:"projectName"}},[a("bda-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.projectName,callback:function(t){e.$set(e.formData,"projectName",t)},expression:"formData.projectName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"规则分类",prop:"projectType"}},[a("bda-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.projectType,callback:function(t){e.$set(e.formData,"projectType",t)},expression:"formData.projectType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"归口部门",prop:"team"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formData.team,callback:function(t){e.$set(e.formData,"team",t)},expression:"formData.team"}},e._l(e.form.team,(function(e){return a("bda-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"风险等级",prop:"rank"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formData.rank,callback:function(t){e.$set(e.formData,"rank",t)},expression:"formData.rank"}},e._l(e.form.rank,(function(e){return a("bda-option",{key:e.code,attrs:{label:e.name,value:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"责任岗位",prop:"position"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formData.position,callback:function(t){e.$set(e.formData,"position",t)},expression:"formData.position"}},e._l(e.form.position,(function(e){return a("bda-option",{key:e.code,attrs:{label:e.name,value:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"业务流程阶段",prop:"stage"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{multiple:"",disabled:e.yejdDisabled,size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formData.stage,callback:function(t){e.$set(e.formData,"stage",t)},expression:"formData.stage"}},e._l(e.form.stage,(function(e){return a("bda-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1)],1),a("el-row",[a("bda-form-item",{attrs:{label:"业务事项",prop:"matter"}},[a("bda-input",{attrs:{type:"textarea",resize:"none",clearable:"",placeholder:"请输入"},model:{value:e.formData.matter,callback:function(t){e.$set(e.formData,"matter",t)},expression:"formData.matter"}})],1)],1),a("el-row",[a("bda-form-item",{attrs:{label:"定义规则",prop:"ruleDefine"}},[a("bda-input",{attrs:{type:"textarea",resize:"none",clearable:"",placeholder:"请输入"},model:{value:e.formData.ruleDefine,callback:function(t){e.$set(e.formData,"ruleDefine",t)},expression:"formData.ruleDefine"}})],1)],1),a("el-row",[a("bda-form-item",{staticStyle:{height:"auto"},attrs:{label:"文件条文索引",prop:"indexes"}},[a("bda-input",{attrs:{type:"textarea",resize:"none",clearable:"",placeholder:"请输入"},model:{value:e.formData.indexes,callback:function(t){e.$set(e.formData,"indexes",t)},expression:"formData.indexes"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"关联知识库",prop:"repository"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.form.repository,props:{expandTrigger:"hover",multiple:!0,label:"name",value:"code"},placeholder:"请选择","collapse-tags":"",clearable:""},on:{change:e.adf},model:{value:e.formData.repository,callback:function(t){e.$set(e.formData,"repository",t)},expression:"formData.repository"}}),e._e()],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"规则实例名",prop:"instanceName"}},[a("bda-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.instanceName,callback:function(t){e.$set(e.formData,"instanceName",t)},expression:"formData.instanceName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"是否启用",prop:"state"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formData.state,callback:function(t){e.$set(e.formData,"state",t)},expression:"formData.state"}},e._l(e.form.state,(function(e){return a("bda-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("bda-button",{attrs:{bdatype:"primary"},on:{click:e.sureDialog}},[e._v("保存")]),a("bda-button",{attrs:{bdatype:"defualt"},on:{click:e.closeDialog}},[e._v("关闭")])],1)])},o=[],s=(a("ac6a"),a("8986")),i={name:"headerSetDialog",mixins:[s["a"]],data:function(){return{dialogVisible:!1,yejdDisabled:!1,form:{team:[],rank:[],position:[],stage:[],repository:[],state:[{id:1,name:"是"},{id:2,name:"否"}]},formData:{projectName:"",projectType:"",team:"",stage:[],matter:"",ruleDefine:"",rank:"",position:"",instanceName:"",indexes:"",repository:[],state:""},ruleId:"",rules:{projectName:[{required:!0,message:"请填写规则名称",trigger:"blur"}],projectType:[{required:!0,message:"请选择规则分类",trigger:"blur"}],team:[{required:!0,message:"请选择归口部门",trigger:"blur"}],matter:[{required:!0,message:"请选填写业务事项",trigger:"blur"}],ruleDefine:[{required:!0,message:"请输入业务规则",trigger:"blur"}],rank:[{required:!0,message:"请选择风险等级",trigger:"blur"}],position:[{required:!0,message:"请选择责任岗位",trigger:"blur"}],repository:[{required:!0,message:"请选择关联知识库",trigger:"blur"}],state:[{required:!0,message:"请选择启用状态",trigger:"blur"}]}}},watch:{},mounted:function(){name},methods:{saveData:function(){var e=this;window.console.log(this.formData.repository,"ooo"),this.ruleAdd({ruleName:this.formData.projectName,ruleType:this.formData.projectType,ruleDefine:this.formData.ruleDefine,departmentId:this.formData.team,riskLevel:this.formData.rank,zrgw:this.formData.position,ywjdIds:this.formData.stage,ywsx:this.formData.matter,wjtwsy:this.formData.indexes,glzsks:this.formData.repository,ruleObj:this.formData.instanceName,isOpen:this.formData.state}).then((function(){e.$parent.serachEvent()})).finally((function(){e.dialogVisible=!1}))},editData:function(){var e=this;this.ruleUpdate({ruleName:this.formData.projectName,ruleType:this.formData.projectType,ruleDefine:this.formData.ruleDefine,departmentId:this.formData.team,riskLevel:this.formData.rank,zrgw:this.formData.position,ywjdIds:this.formData.stage,ywsx:this.formData.matter,wjtwsy:this.formData.indexes,glzsks:this.formData.repository,ruleObj:this.formData.instanceName,isOpen:this.formData.state,ruleId:this.ruleId}).then((function(){e.$parent.serachEvent()})).finally((function(){e.dialogVisible=!1}))},getServiceProcess:function(){var e=this;this.serviceProcess({}).then((function(t){e.form.stage=t})).finally((function(){}))},getZskList:function(){var e=this;this.knowledgeRelate({}).then((function(t){e.form.repository=t})).finally((function(){}))},openDialog:function(e){this.yejdDisabled=!1,this.form.team=e.department||[],this.form.rank=e.riskLevel||[],this.form.position=e.zrgw||[],this.dialogVisible=!0,this.getServiceProcess(),this.getZskList()},openDialogEdit:function(e,t){this.yejdDisabled=!0,this.ruleId=t.ruleId,this.form.team=e.department||[],this.form.rank=e.riskLevel||[],this.form.position=e.zrgw||[],this.formData.projectName=this.getStringData(t.ruleName),this.formData.projectType=this.getStringData(t.ruleType),this.formData.ruleDefine=this.getStringData(t.ruleDefine),this.formData.team=this.getStringData(t.department),this.formData.rank=this.getStringData(t.riskLevel),this.formData.position=this.getStringData(t.zrgw),this.formData.stage=this.getBusinessPhases(t.businessPhase),this.formData.repository=this.getZskId(t.relateVo),this.formData.matter=this.getStringData(t.ywsx),this.formData.indexes=this.getStringData(t.wjtwsy),this.formData.state=this.getStringData(t.isOpen),this.formData.instanceName=this.getStringData(t.ruleObj),this.dialogVisible=!0,this.getServiceProcess(),this.getZskList()},getStringData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||""},getBusinessPhases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[e.ywjdId];return t},getZskId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.length>0&&e.forEach((function(e){e.children.forEach((function(a,r){t[r]=[],t[r][0]=e.code,t[r].push(a.code)}))})),t},adf:function(e){window.console.log(e)},closeDialog:function(){this.dialogVisible=!1,this.$parent.addDialog=!1},sureDialog:function(){var e=this;this.$refs.forms.validate((function(t){t&&(e.yejdDisabled?e.editData():e.saveData())}))}}},l=i,n=(a("0489"),a("2877")),m=Object(n["a"])(l,r,o,!1,null,"93bf4ed4",null);t["default"]=m.exports},f0a3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-c2c170ac.b8aefe7e.js.map