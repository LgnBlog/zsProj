(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2af3115f","chunk-26ff2546"],{"1d19":function(e,t,l){"use strict";var a=l("383d"),n=l.n(a);n.a},"2bc8":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-select",{attrs:{placeholder:"请选择",clearable:e.clearable},on:{clear:e.clearHandle},model:{value:e.valueTitle,callback:function(t){e.valueTitle=t},expression:"valueTitle"}},[l("el-option",{staticClass:"options",attrs:{value:e.valueTitle,label:e.valueTitle}},[l("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:e.accordion,data:e.options,props:e.props,"node-key":e.props.value,"default-expanded-keys":e.defaultExpandedKey},on:{"node-click":e.handleNodeClick}})],1)],1)},n=[],i=(l("ac6a"),l("c5f6"),{name:"el-tree-select",props:{props:{type:Object,default:function(){return{value:"id",label:"title",children:"children"}}},options:{type:Array,default:function(){return[]}},value:{type:String,default:function(){return null}},clearable:{type:Boolean,default:function(){return!0}},accordion:{type:Boolean,default:function(){return!1}}},data:function(){return{valueId:null,valueTitle:"",defaultExpandedKey:[]}},mounted:function(){this.valueId=this.value,this.initHandle()},methods:{initHandle:function(){var e=this;this.valueId?setTimeout((function(){window.console.log(e.options),e.valueTitle=e.$refs.selectTree.getNode(Number(e.valueId)).data[e.props.label],e.$refs.selectTree.setCurrentKey(Number(e.valueId)),e.defaultExpandedKey=[e.valueId]}),500):this.valueTitle="",this.initScroll()},initScroll:function(){this.$nextTick((function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin: 0px; max-height: none; overflow: hidden;",t.forEach((function(e){return e.style.width=0}))}))},handleNodeClick:function(e,t){window.console.log(t),this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("getValue",[this.valueId,this.valueTitle]),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.valueId=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue",[this.valueId,this.valueTitle])},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach((function(e){return e.classList.remove("is-current")}))}},watch:{value:function(){this.valueId=this.value,this.initHandle()}}}),r=i,o=(l("dbcf"),l("2877")),s=Object(o["a"])(r,a,n,!1,null,"a35f4ec4",null);t["default"]=s.exports},"383d":function(e,t,l){},6009:function(e,t,l){},d442:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{class:"1"===e.$root.themeHomeChange?"supervisionPlanExecution_light":"supervisionPlanExecution"},[l("div",{staticClass:"header"},[l("span",{staticClass:"left"},[e._v("监督计划执行")]),l("div",{staticClass:"right"},[l("el-date-picker",{staticStyle:{"margin-right":"15px"},attrs:{type:"year",placeholder:"选择年","value-format":"yyyy"},model:{value:e.params.year,callback:function(t){e.$set(e.params,"year",t)},expression:"params.year"}}),l("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:function(t){return e.planExecution(!0)}}},[e._v(" 计划执行 ")]),l("el-button",{attrs:{type:"warning",icon:"el-icon-document",plain:"1"===e.$root.themeHomeChange,disabled:!(e.currentRow&&0===e.currentRow.isCompletedRectify)},on:{click:function(t){return e.planExecution(!1)}}},[e._v(" 编辑 ")]),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"1"===e.$root.themeHomeChange,disabled:0===e.multipleSelection.length},on:{click:e.deleteTableItem}},[e._v(" 删除 ")])],1)]),l("el-form",{staticClass:"selectBox",attrs:{inline:!0,model:e.params}},[l("span",[l("el-form-item",{attrs:{label:"整改时间: "}},[l("el-input-number",{staticStyle:{width:"155px","margin-right":"15px"},attrs:{min:1,max:12,size:"mini",placeholder:"整改时间(月份)"},model:{value:e.params.rectifyTime,callback:function(t){e.$set(e.params,"rectifyTime",t)},expression:"params.rectifyTime"}})],1),l("el-form-item",{attrs:{label:"单位名称: "}},[l("SelectTree",{ref:"selectTreeRef",staticStyle:{width:"100%"},attrs:{props:e.defaultProps,options:e.treeData,value:e.valueId,clearable:!0,accordion:!0},on:{getValue:function(t){return e.getValue(t)}}})],1),l("el-form-item",{attrs:{label:"领域: "}},[l("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择",clearable:""},on:{change:function(t){return e.queryTableList(!0)}},model:{value:e.params.supervisionField,callback:function(t){e.$set(e.params,"supervisionField",t)},expression:"params.supervisionField"}},e._l(e.formOption["supervisionField"],(function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),l("span",[l("el-form-item",[l("bda-search-input",{attrs:{placeholder:"请输入关键字",size:"mini"},on:{search:function(t){return e.queryTableList(!0)},clear:function(t){return e.queryTableList(!0)}},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.queryTableList(!0)}}},[e._v(" 查询 ")])],1)],1)]),l("div",{staticClass:"content"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,"highlight-current-row":"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"current-change":e.handleCurrentChange_table,"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),l("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),l("el-table-column",{attrs:{prop:"taskName",label:"任务名称",width:"120",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"jdnr",label:"监督内容","min-width":"180",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"dwmc",label:"单位名称",width:"100",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"jcdx",label:"检查对象",width:"100",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"planTime",label:"计划开展时间",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.jhsjBegin+"月 ~ "+t.row.jhsjEnd+"月")+"\n        ")]}}])}),l("el-table-column",{attrs:{prop:"type",label:"监督类别",width:"120",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"jdly",label:"监督领域",width:"100",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"jhkznr",label:"计划开展内容","min-width":"180","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.jhkznrList,(function(t,a){return l("div",{key:a,staticStyle:{"line-height":"20px"}},[e._v("\n            "+e._s("内容 ["+(a+1)+"] : "+t.jhkznr)+"\n          ")])}))}}])}),l("el-table-column",{attrs:{prop:"questionList",label:"发现问题","min-width":"180","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.questionList,(function(t,a){return l("div",{key:a,staticStyle:{"line-height":"20px"}},[e._v("\n            "+e._s("问题 [ "+(a+1)+" ] : "+t.question)+"\n          ")])}))}}])}),l("el-table-column",{attrs:{prop:"questionType",label:"问题类别",width:"80",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"zrdw",label:"责任单位",width:"120",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"zrr",label:"责任人",width:"100",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"zgcs",label:"整改措施","min-width":"130",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"jhzgqk",label:"整改情况",width:"80",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"filePath",label:"附件",width:"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getFileName(t.row.filePath))+"\n        ")]}}])}),l("el-table-column",{attrs:{prop:"isCompletedRectify",label:"是否完成整改",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.isCompletedRectify?"已完成":"未完成")+"\n        ")]}}])}),l("el-table-column",{attrs:{prop:"completedRectifyDate",label:"(预计)完成整改时间",width:"150",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"unfinishedRectifyReason",label:"未完成整改原因说明","min-width":"150",align:"center","show-overflow-tooltip":""}})],1),l("el-pagination",{attrs:{"current-page":e.params.currentPage,"page-sizes":[10,50,100,200],"page-size":e.params.pageSize,background:"",layout:"prev, pager, next, sizes, jumper, total",total:e.params.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e.showAdd?l("planExecution",{attrs:{formData_in:e.currentRow},on:{closeDilag:function(t){return e.init()}}}):e._e()],1)},n=[],i=(l("7f7f"),l("6b54"),l("921b")),r=l("1a48"),o=l("2bc8"),s={name:"supervisionPlanExecution",mixins:[r["a"]],props:{},components:{planExecution:i["default"],SelectTree:o["default"]},data:function(){return{defaultProps:{children:"list",label:"orgName",value:"orgId"},treeData:[],valueId:"",tableLoading:!1,tableHeight:window.innerHeight-245,departmentList:[],params:{pageSize:10,currentPage:1,total:0,year:"",dwmc:"全部"},showAdd:!1,formOption:{dwmc:[{label:"全部",value:"全部"},{label:"财务部",value:"财务部"},{label:"市场营销",value:"市场营销"}],supervisionField:[{label:"安全监管领域",value:"安全监管领域"},{label:"市场营销领域",value:"市场营销领域"},{label:"工程建设领域",value:"工程建设领域"},{label:"大党建办公综合领域",value:"大党建办公综合领域"},{label:"财务报销领域",value:"财务报销领域"},{label:"创新与数字化领域",value:"创新与数字化领域"},{label:"其他",value:"其他"}]},tableData:[],multipleSelection:[],currentRow:{}}},created:function(){this.init()},watch:{},mounted:function(){},methods:{init:function(){this.showAdd=!1,this.currentRow={},this.params.year=(new Date).getFullYear().toString(),this.queryTableList(!0),this.getOrgData()},getFileName:function(e){var t=e.lastIndexOf("/"),l=e.lastIndexOf("\\"),a=Math.max(t,l);return a<0?e:e.substring(a+1)},getOrgData:function(){var e=this;this.getSupervisionUnitTree().then((function(t){Array.isArray(t)&&0!==t.length?e.treeData=t:e.treeData=[]})).finally((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange_table:function(e){window.console.log(e),this.currentRow=e},getValue:function(e){this.params.unit=e[1],this.queryTableList(!0)},queryTableList:function(e){var t=this;e&&this.setPages();var l={current:this.params.currentPage,size:this.params.pageSize,keyword:this.params.keyword,rectifyTime:this.params.rectifyTime,supervisionField:this.params.supervisionField,unit:this.params.unit,year:this.params.year};this.tableData=[],this.tableLoading=!0,this.getSupervisionExecList(l).then((function(e){window.console.log(e),e?(t.tableData=e.rows,t.setPages(e.current,e.size,e.records)):t.setPages()})).finally((function(){t.tableLoading=!1}))},setPages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.params["pageSize"]=t,this.params["currentPage"]=e,this.params["total"]=l},handleClick:function(e,t){window.console.log("类型：".concat(t," , 行内容:"),e),this.$router.push({path:"/details",query:{index:"4-2",params:window.btoa(window.encodeURIComponent(JSON.stringify({name:e.name,orderId:e.orderId||this.$route.query.orderId}))),actNav:this.$route.query.actNav}})},handleSizeChange:function(e){this.params.pageSize=e,this.queryTableList()},handleCurrentChange:function(e){this.params.currentPage=e,this.queryTableList()},planExecution:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.currentRow={}),this.showAdd=!0},deleteTableItem:function(){var e=this;this.$confirm("此操作将删除选中的监督计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.supervisionExecDelete({ids:e.multipleSelection.map((function(e){return e.jdrwId}))}).then((function(){e.$message.success("删除成功")})).finally((function(){e.init()}))})).catch((function(){}))}}},c=s,u=(l("1d19"),l("2877")),d=Object(u["a"])(c,a,n,!1,null,"77b0f85d",null);t["default"]=d.exports},dbcf:function(e,t,l){"use strict";var a=l("6009"),n=l.n(a);n.a}}]);
//# sourceMappingURL=chunk-2af3115f.a02d70a5.js.map