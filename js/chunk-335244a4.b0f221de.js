(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-335244a4","chunk-26ff2546"],{"2bc8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{placeholder:"请选择",clearable:e.clearable},on:{clear:e.clearHandle},model:{value:e.valueTitle,callback:function(t){e.valueTitle=t},expression:"valueTitle"}},[a("el-option",{staticClass:"options",attrs:{value:e.valueTitle,label:e.valueTitle}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:e.accordion,data:e.options,props:e.props,"node-key":e.props.value,"default-expanded-keys":e.defaultExpandedKey},on:{"node-click":e.handleNodeClick}})],1)],1)},l=[],i=(a("ac6a"),a("c5f6"),{name:"el-tree-select",props:{props:{type:Object,default:function(){return{value:"id",label:"title",children:"children"}}},options:{type:Array,default:function(){return[]}},value:{type:String,default:function(){return null}},clearable:{type:Boolean,default:function(){return!0}},accordion:{type:Boolean,default:function(){return!1}}},data:function(){return{valueId:null,valueTitle:"",defaultExpandedKey:[]}},mounted:function(){this.valueId=this.value,this.initHandle()},methods:{initHandle:function(){var e=this;this.valueId?setTimeout((function(){window.console.log(e.options),e.valueTitle=e.$refs.selectTree.getNode(Number(e.valueId)).data[e.props.label],e.$refs.selectTree.setCurrentKey(Number(e.valueId)),e.defaultExpandedKey=[e.valueId]}),500):this.valueTitle="",this.initScroll()},initScroll:function(){this.$nextTick((function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin: 0px; max-height: none; overflow: hidden;",t.forEach((function(e){return e.style.width=0}))}))},handleNodeClick:function(e,t){window.console.log(t),this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("getValue",[this.valueId,this.valueTitle]),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.valueId=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue",[this.valueId,this.valueTitle])},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach((function(e){return e.classList.remove("is-current")}))}},watch:{value:function(){this.valueId=this.value,this.initHandle()}}}),o=i,r=(a("dbcf"),a("2877")),s=Object(r["a"])(o,n,l,!1,null,"a35f4ec4",null);t["default"]=s.exports},"52e3":function(e,t,a){},6009:function(e,t,a){},"60ee":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"element-bda-table",class:"1"===e.$root.themeHomeChange?"element-bda-tableL":"element-bda-table"},[a("bda-scroll-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:e.tableHeight?e.tableHeight:null},on:{"selection-change":e.handleSelectionChange}},[e.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e.index?a("el-table-column",{attrs:{type:"index",label:"序号","header-align":"center",align:"center",width:"80"}}):e._e(),e._l(e.columnArray,(function(t){return a("el-table-column",{key:t.prop,attrs:{"show-overflow-tooltip":"",prop:t.prop,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return["operate"===t.type?a("span",e._l(t.linkName,(function(t){return a("el-button",{key:t,attrs:{type:"text"},on:{click:function(a){return e.rowClick(n.row,t)}}},[e._v(e._s(t||""))])})),1):"link"===t.type?e._l(n.row[t.prop],(function(l){return a("div",{key:l[t.key]||""},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleLink(n.row,l)}}},[e._v(e._s(l.fileName||""))])],1)})):a("span",[e._v("\n                    "+e._s(n.row[t.prop])+"\n                ")])]}}],null,!0)})}))],2),a("div",{staticStyle:{"text-align":"center","margin-top":"8px"}},[a("el-pagination",{attrs:{"current-page":e.pagesRs.pageNo,"page-sizes":[10,20,30,40],"page-size":e.pagesRs.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagesRs.total},on:{"size-change":e.handleSizeChangeRs,"current-change":e.handleCurrentChangeRs}})],1)],1)},l=[],i=(a("c5f6"),{name:"element-bda-table",components:{},props:{tableData:{type:Array,default:function(){return[]}},columnArray:{type:Array,default:function(){return[]}},pageSize:{type:Number,default:function(){return 10}},pageNo:{type:Number,default:function(){return 1}},total:{type:Number,default:function(){return 0}},tableHeight:{type:Number,default:function(){return null}},selection:{type:Boolean,default:function(){return!1}},index:{type:Boolean,default:function(){return!0}}},watch:{tableData:{handler:function(e){this.tableData=e||[]},deep:!0,immediate:!0},pageSize:function(e){this.pagesRs.pageSize=e||10},pageNo:function(e){this.pagesRs.pageNo=e||1},total:function(e){this.pagesRs.total=e||0}},data:function(){return{pagesRs:{pageNo:1,pageSize:10,total:0}}},created:function(){},methods:{rowClick:function(e,t){var a=this;"删除"===t?this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("getRow",e,t)})).catch((function(){a.$message({type:"info",message:"已取消删除"})})):this.$emit("getRow",e,t)},handleLink:function(e,t){this.$emit("linkRow",e,t)},handleCurrentChangeRs:function(e){this.pagesRs.pageNo=e,this.$emit("getPageNo",e)},handleSizeChangeRs:function(e){this.pagesRs.pageSize=e,this.$emit("getPageSize",e)},handleSelectionChange:function(e){this.$emit("selectBox",e)}}}),o=i,r=(a("ffc9"),a("2877")),s=Object(r["a"])(o,n,l,!1,null,"7da33e47",null);t["a"]=s.exports},"660f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"1"===e.$root.themeHomeChange?"supervisionPlanExecution_light":"supervisionPlanExecution"},[a("div",{staticClass:"header"},[a("span",{staticClass:"left"},[e._v("监督计划完成情况统计")]),a("div",{staticClass:"right"},[a("el-date-picker",{staticStyle:{"margin-right":"15px"},attrs:{type:"year",placeholder:"选择年"},on:{change:e.getSupervisionComTable},model:{value:e.yearData,callback:function(t){e.yearData=t},expression:"yearData"}}),a("el-button",{attrs:{type:"primary",icon:e.dataType?"el-icon-s-grid":"el-icon-s-data"},on:{click:e.changeData}},[e._v(" "+e._s(e.dataType?"查看图表数据":"查看表格数据")+" ")])],1)]),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.dataType,expression:"dataType"}],staticClass:"selectBox",attrs:{inline:!0,model:e.params}},[a("span",[a("el-form-item",{attrs:{label:"单位名称: "}},[a("SelectTree",{ref:"selectTreeRef",staticStyle:{width:"100%"},attrs:{props:e.defaultProps,options:e.formOption,value:e.params.dwmc,clearable:!0,accordion:!0},on:{getValue:function(t){return e.getValue(t)}}})],1)],1),a("span",[a("el-form-item",[a("bda-search-input",{attrs:{placeholder:"请输入关键字",size:"mini"},on:{search:function(t){return e.getSupervisionComTable()},clear:function(t){return e.getSupervisionComTable()}},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getSupervisionComTable}},[e._v(" 查询 ")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.excelExports}},[e._v(" 导出 ")])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.dataType,expression:"dataType"}],staticClass:"content",staticStyle:{height:"calc(100% - 126px)"}},[a("element-bda-table-page",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",tableData:e.tableData,columnArray:e.majorCol,pageSize:e.pagesRs.pageSize,pageNo:e.pagesRs.pageNo,total:e.pagesRs.total},on:{getPageNo:e.changePageNo,getPageSize:e.changePageSize}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.dataType,expression:"!dataType"}],staticClass:"chartsData",staticStyle:{height:"calc(100% - 66px)"}},[a("supervision-plan-statistics-charts",{ref:"initCharts"})],1)],1)},l=[],i=(a("6b54"),a("1a48")),o=a("60ee"),r=a("a8bf"),s=a("2bc8"),c=a("db49"),u=a("bc3a"),p=a.n(u),d={name:"supervisionPlanExecution",mixins:[i["a"]],props:{},components:{elementBdaTablePage:o["a"],supervisionPlanStatisticsCharts:r["default"],SelectTree:s["default"]},data:function(){return{dataType:!0,tableLoading:!1,departmentList:[],showAdd:!1,defaultProps:{children:"list",label:"orgName",value:"orgId"},unitName:"",formOption:[],majorCol:[{prop:"dwmc",label:"单位名称"},{prop:"jdjhCount",label:"监督计划（条）"},{prop:"completeProgressRate",label:"完成进度"},{prop:"jdjcCount",label:"监督检查次数"},{prop:"jdfxwtCount",label:"监督发现问题量"},{prop:"wtzgRate",label:"问题整改情况"},{prop:"dcjcfxwtCount",label:"单次检查发现问题数"},{prop:"aqjglyCount",label:"安全监管领域"},{prop:"scyxlyCount",label:"市场营销领域"},{prop:"gcjslyCount",label:"工程建设领域"},{prop:"ddjbgzhlyCount",label:"大党建办公室领域"},{prop:"cwbxlyCount",label:"财务报销领域"},{prop:"cxyszhlyCount",label:"创新与数字化领域"},{prop:"otherCount",label:"其他"},{prop:"wtsjlyCount",label:"问题涉及领域"}],tableData:[],params:{dwmc:"",keyword:""},yearData:"",pagesRs:{pageNo:1,pageSize:10,total:0}}},created:function(){this.init()},watch:{},mounted:function(){this.getSupervisionComTable(),this.getOrgData()},methods:{init:function(){this.yearData=(new Date).getFullYear().toString()},excelExports:function(){var e="/supervision/chart/export",t={unit:this.unitName,keyword:this.params.keyword,year:this.yearData};p()({method:"POST",url:c["b"]+e,data:t,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"}).then((function(e){var t=e.data,a=new Blob([t]),n="监督计划执行情况图表.xls";if("download"in document.createElement("a")){var l=document.createElement("a");l.download=n,l.style.display="none",l.href=URL.createObjectURL(a),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}else navigator.msSaveBlob(a,n)})).finally((function(){})).catch((function(){}))},getOrgData:function(){var e=this;this.getSupervisionUnitTree().then((function(t){Array.isArray(t)&&0!==t.length?e.formOption=t:e.formOption=[]})).finally((function(){}))},getValue:function(e){this.unitName=e.length>0?e[1]:""},getSupervisionComTable:function(){var e=this;this.tableLoading=!0,this.supervisionComTable({unit:this.unitName,current:this.pagesRs.pageNo,keyword:this.params.keyword,size:this.pagesRs.pageSize,year:this.yearData}).then((function(t){window.console.log(t),t?(e.tableData=t.rows,e.pagesRs.total=t.records):(e.tableData=[],e.pagesRs.total=0)})).finally((function(){e.tableLoading=!1})),this.$refs.initCharts.init()},queryTableList:function(){},changePageNo:function(e){this.pagesRs.pageNo=e,this.getSupervisionComTable()},changePageSize:function(e){this.pagesRs.pageSize=e,this.getSupervisionComTable()},changeData:function(){this.dataType=!this.dataType}}},h=d,f=(a("8b24"),a("2877")),g=Object(f["a"])(h,n,l,!1,null,"fecc871c",null);t["default"]=g.exports},"8b24":function(e,t,a){"use strict";var n=a("52e3"),l=a.n(n);l.a},b5ca:function(e,t,a){},dbcf:function(e,t,a){"use strict";var n=a("6009"),l=a.n(n);l.a},ffc9:function(e,t,a){"use strict";var n=a("b5ca"),l=a.n(n);l.a}}]);
//# sourceMappingURL=chunk-335244a4.b0f221de.js.map