(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ff92378"],{"2a68":function(e,a,t){},5444:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("bda-dialog",{class:"1"===e.$root.themeHomeChange?"dialogZsLight":"",attrs:{visible:e.dialogVisible,modal:!1,"close-on-click-modal":!1,title:"新增知识库"},on:{close:e.closeDialog,cancel:e.closeDialog}},[t("div",{staticClass:"dialogBox"},[t("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px","label-suffix":"："}},[e._e(),t("el-row",[t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"知识库类别",prop:"type"}},[t("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.handeleSelectZsk},model:{value:e.formData.type,callback:function(a){e.$set(e.formData,"type",a)},expression:"formData.type"}},e._l(e.form.type,(function(e){return t("bda-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"最新版本号",prop:"bbh"}},[t("bda-input",{staticStyle:{display:"inline-block",width:"100%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.bbh,callback:function(a){e.$set(e.formData,"bbh",a)},expression:"formData.bbh"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"知识库名称",prop:"docName"}},[t("bda-input",{staticStyle:{display:"inline-block",width:"100%"},attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.docName,callback:function(a){e.$set(e.formData,"docName",a)},expression:"formData.docName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"所属部门",prop:"section"}},[t("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",multiple:"","collapse-tags":"",clearable:"",placeholder:"请选择"},on:{change:e.partmentChange},model:{value:e.formData.section,callback:function(a){e.$set(e.formData,"section",a)},expression:"formData.section"}},e._l(e.form.section,(function(e){return t("bda-option",{key:e.code,attrs:{label:e.name,value:e.name}})})),1)],1)],1)],1),"1"!==e.documentType?t("el-row",[t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"制度级别",prop:"zdgndyValue"}},[t("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formData.zdgndyValue,callback:function(a){e.$set(e.formData,"zdgndyValue",a)},expression:"formData.zdgndyValue"}},e._l(e.form.zdgndyArray,(function(e){return t("bda-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"业务制度类别",prop:"ywzdlbValue"}},[t("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formData.ywzdlbValue,callback:function(a){e.$set(e.formData,"ywzdlbValue",a)},expression:"formData.ywzdlbValue"}},e._l(e.form.ywzdlbArray,(function(e){return t("bda-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1)],1):e._e(),t("el-row",[t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"岗位名称",prop:"postCode"}},[t("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.postChange},model:{value:e.formData.postCode,callback:function(a){e.$set(e.formData,"postCode",a)},expression:"formData.postCode"}},e._l(e.form.postArray,(function(e){return t("bda-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"颁布机构",prop:"enact"}},[[t("bda-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.enact,callback:function(a){e.$set(e.formData,"enact",a)},expression:"formData.enact"}})]],2)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"颁布时间",prop:"timer"}},[[t("bda-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,"value-format":"yyyy-MM-dd"},model:{value:e.formData.timer,callback:function(a){e.$set(e.formData,"timer",a)},expression:"formData.timer"}})]],2)],1),t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"上传附件",prop:"fileList"}},[t("el-upload",{staticClass:"upload-demo",attrs:{data:e.fileData,name:"files",multiple:!0,action:e.fileUrl,"on-change":e.handleChange,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"file-list":e.formData.fileList}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1),"2"===e.documentType?t("el-row",[t("el-col",{attrs:{span:12}},[t("bda-form-item",{attrs:{label:"制度层级",prop:"systemLevel"}},[[t("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formData.systemLevel,callback:function(a){e.$set(e.formData,"systemLevel",a)},expression:"formData.systemLevel"}},e._l(e.form.systemLevelOption,(function(e){return t("bda-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)]],2)],1),t("el-col",{attrs:{span:12}})],1):e._e()],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("bda-button",{attrs:{bdatype:"primary"},on:{click:e.sureDialog}},[e._v("保存")]),t("bda-button",{attrs:{bdatype:"defualt"},on:{click:e.closeDialog}},[e._v("关闭")])],1)])},l=[],r=(t("7f7f"),t("ac6a"),t("db49")),s=t("8986"),n=[{code:"安全管理",name:"安全管理"},{code:"标准化管理",name:"标准化管理"},{code:"创新管理",name:"创新管理"},{code:"党的建设",name:"党的建设"},{code:"法律管理",name:"法律管理"},{code:"工会团青",name:"工会团青"},{code:"公司治理",name:"公司治理"},{code:"供应链管理",name:"供应链管理"},{code:"行政办公",name:"行政办公"},{code:"基建管理",name:"基建管理"},{code:"计划财务",name:"计划财务"},{code:"纪检监督",name:"纪检监督"},{code:"其他",name:"其他"},{code:"企业文化",name:"企业文化"},{code:"人力资源",name:"人力资源"},{code:"审计内控",name:"审计内控"},{code:"生产运维",name:"生产运维"},{code:"市场营销",name:"市场营销"},{code:"数字化管理",name:"数字化管理"},{code:"统计运监",name:"统计运监"},{code:"投资管理",name:"投资管理"},{code:"外事管理",name:"外事管理"},{code:"系统运行",name:"系统运行"},{code:"战略管理",name:"战略管理"},{code:"资本运营",name:"资本运营"}],i=[{code:"基本制度",name:"基本制度"},{code:"重要制度",name:"重要制度"},{code:"一般制度",name:"一般制度"},{code:"业务指导书",name:"业务指导书"}],c={mixins:[s["a"]],data:function(){return{dialogVisible:!1,form:{systemLevelOption:[{code:"网测",name:"网测"},{code:"省测",name:"省测"},{code:"地市局",name:"地市局"}],type:[],section:[],postArray:[],ywzdlbArray:n,zdgndyArray:i},rules:{bbh:[{required:!0,message:"请填版本号",trigger:"blur"}],docName:[{required:!0,message:"请填写文档名称",trigger:"blur"}],type:[{required:!0,message:"请选择目录类型",trigger:"blur"}],section:[{required:!0,message:"请选择所属部门",trigger:"blur"}],enact:[{required:!0,message:"请填写颁布机构",trigger:"blur"}],timer:[{required:!0,message:"请选择颁布时间",trigger:"blur"}]},formData:{creator:"管理员",bbh:"V1.0",docName:"",type:"",typeName:"",section:"",enact:"",timer:"",systemLevel:"",postCode:"",ywzdlbValue:"",zdgndyValue:"",fileList:[]},typeName:"",sectionName:"",postName:"",fileData:{documentTypeName:""},fjsc:[],fileUrl:r["b"]+"/knowledge/file/upload",documentType:null}},watch:{$route:function(){this.documentType=this.$route.query.itemIndex}},created:function(){this.documentType=this.$route.query.itemIndex},mounted:function(){},methods:{initData:function(){this.form.section=this.$parent.sectionList||[],this.form.type=JSON.parse(sessionStorage.getItem("departmentList")),this.getPostList()},getPostList:function(){var e=this;this.knowledgeDuty({}).then((function(a){e.form.postArray=a||[]}))},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1,this.$parent.addView=!1},handleAvatarSuccess:function(e,a,t){var o=this;window.console.log(e),window.console.log(a),window.console.log(t),this.fjsc=[],t.forEach((function(e){o.fjsc.push(e.response[0].filePath)}))},beforeAvatarUpload:function(){return this.formData.type?(this.fileData.documentTypeName=this.typeName,!0):(this.$message.warning("请先选择知识库类别"),!1)},handleChange:function(e,a){this.formData.fileList=a.slice(-3)},sureDialog:function(){var e=this;this.$refs.form.validate((function(a){a&&e.knowledgeAdd({bbjg:e.formData.enact,bbsj:e.formData.timer,systemLevel:"2"===e.documentType?e.formData.systemLevel:"",creator:e.formData.creator,departmentList:e.formData.section,knowledgeName:e.formData.docName,documentDetails:e.fjsc,knowledgeTypeId:e.formData.type,knowledgeType:e.typeName,version:e.formData.bbh,zrgwId:e.formData.postCode,zrgw:e.postName,systemFunctionOrientation:"1"!==e.documentType?e.formData.zdgndyValue:"",systemBusinessType:"1"!==e.documentType?e.formData.ywzdlbValue:""}).then((function(){})).finally((function(){e.$emit("addData",!0),e.dialogVisible=!1}))}))},handeleSelectZsk:function(e){this.documentType=e;for(var a=0;a<this.form.type.length;a++)this.form.type[a].code===e&&(this.typeName=this.form.type[a].name)},partmentChange:function(e){for(var a=0;a<this.form.section.length;a++)this.form.section[a].code===e&&(this.sectionName=this.form.section[a].name)},postChange:function(e){for(var a=0;a<this.form.postArray.length;a++)this.form.postArray[a].code===e&&(this.postName=this.form.postArray[a].name)}}},m=c,d=(t("a98c"),t("2877")),f=Object(d["a"])(m,o,l,!1,null,"999a9a30",null);a["default"]=f.exports},a98c:function(e,a,t){"use strict";var o=t("2a68"),l=t.n(o);l.a}}]);
//# sourceMappingURL=chunk-7ff92378.f4148757.js.map