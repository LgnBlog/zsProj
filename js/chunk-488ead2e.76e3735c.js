(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-488ead2e","chunk-d14d3e00","chunk-3eff898f","chunk-d5111084","chunk-6f996d08"],{"0053":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("bda-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],class:"1"===t.$root.themeHomeChange?"addDialog_light":"addDialog",attrs:{visible:t.dialogVisible,modal:!1,"close-on-click-modal":!1,title:"新建合规任务","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)"},on:{close:t.closeDialog,cancel:t.closeDialog}},[a("div",{staticClass:"dialogBox"},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,"label-width":"110px","label-suffix":"：",label:"任务基础信息"}},[[a("p",{staticClass:"tableTitle"},[t._v("任务基础信息")])],a("el-row",[a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"任务名称",prop:"taskName"}},[a("bda-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:t.formData.taskName,callback:function(e){t.$set(t.formData,"taskName",e)},expression:"formData.taskName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"任务类别",prop:"taskType"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formData.taskType,callback:function(e){t.$set(t.formData,"taskType",e)},expression:"formData.taskType"}},t._l(t.form.type,(function(t){return a("bda-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"业务流程",prop:"processId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},on:{change:t.processChange},model:{value:t.formData.processId,callback:function(e){t.$set(t.formData,"processId",e)},expression:"formData.processId"}},t._l(t.form.process,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"选择项目",prop:"projectCode"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formData.projectCode,callback:function(e){t.$set(t.formData,"projectCode",e)},expression:"formData.projectCode"}},t._l(t.form.projectList,(function(t){return a("bda-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"检查单位",prop:"checkUnit"}},[a("bda-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:t.formData.checkUnit,callback:function(e){t.$set(t.formData,"checkUnit",e)},expression:"formData.checkUnit"}})],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"被检单位",prop:"beCheckUnitIds"}},[a("SelectTree",{ref:"selectTreeRef",staticStyle:{width:"100%"},attrs:{props:t.defaultProps,options:t.treeData,value:t.valueId,clearable:t.isClearable,accordion:t.isAccordion},on:{getValue:function(e){return t.getValue(e)}}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"检查时间段",prop:"checkDate"}},[a("bda-date-picker",{attrs:{clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange"},model:{value:t.formData.checkDate,callback:function(e){t.$set(t.formData,"checkDate",e)},expression:"formData.checkDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"定时任务开始时间",prop:"timingTaskStartDate"}},[a("bda-date-picker",{attrs:{clearable:!1,placeholder:"请选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime"},model:{value:t.formData.timingTaskStartDate,callback:function(e){t.$set(t.formData,"timingTaskStartDate",e)},expression:"formData.timingTaskStartDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("bda-form-item",{attrs:{label:"执行周期",prop:"taskPerformSync"}},[a("bda-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formData.taskPerformSync,callback:function(e){t.$set(t.formData,"taskPerformSync",e)},expression:"formData.taskPerformSync"}},t._l(t.form.taskPerformSync,(function(t){return a("bda-option",{key:t.id,attrs:{label:t.name,value:t.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("bda-form-item",{attrs:{label:"任务简介",prop:"taskDesc"}},[a("bda-input",{attrs:{type:"textarea",resize:"none",clearable:"",placeholder:"请输入"},model:{value:t.formData.taskDesc,callback:function(e){t.$set(t.formData,"taskDesc",e)},expression:"formData.taskDesc"}})],1)],1)],1),[a("p",{staticClass:"tableTitle"},[t._v("检验规则")])],a("el-row",[a("el-col",{attrs:{span:22}},[a("bda-form-item",{attrs:{prop:"taskRules"}},[a("bda-select",{staticStyle:{width:"260px"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formData.taskRules,callback:function(e){t.$set(t.formData,"taskRules",e)},expression:"formData.taskRules"}},t._l(t.form.taskRules,(function(t){return a("bda-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:2,fixed:"right"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"info"},on:{click:t.clearTaskRulesList}},[t._v("清空")])],1)],1),a("div",{staticClass:"taskRulesArea"},t._l(t.formData.ruleIds,(function(e){return a("el-tag",{key:e.id,attrs:{closable:""},on:{close:function(a){return t.closeTag(e.id)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),1)],2)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("bda-button",{attrs:{bdatype:"primary"},on:{click:t.sureDialog}},[t._v("保存")]),a("el-button",{attrs:{type:"info"},on:{click:t.closeDialog}},[t._v("关闭")])],1)])},r=[],o=(a("456d"),a("ac6a"),a("7f7f"),a("7514"),a("1a48")),l=a("8986"),i=a("dd2a"),s=a("2a17"),c={mixins:[o["a"],l["a"],i["a"]],components:{SelectTree:s["default"]},data:function(){return{dialogVisible:!1,form:{checkDate:"",type:[{id:"1",name:"实时性检查"},{id:"2",name:"计划性检查"},{id:"3",name:"专项性检查"}],process:[],projectList:[],taskPerformSync:[{id:0,value:"仅一次",name:"仅一次"},{id:1,value:"每天",name:"每天"},{id:2,value:"每三天",name:"每三天"},{id:3,value:"每一周",name:"每一周"},{id:4,value:"每半个月",name:"每半个月"},{id:5,value:"每一个月",name:"每一个月"},{id:6,value:"每三个月",name:"每三个月"},{id:7,value:"每半年",name:"每半年"},{id:8,value:"每一年",name:"每一年"}],taskRules:[]},rules:{taskName:[{required:!0,message:"请填写文档名称",trigger:"blur"}],taskType:[{required:!0,message:"请选择任务类别",trigger:"blur"}],checkUnit:[{required:!0,message:"请填写检查单位",trigger:"blur"}],checkDate:[{required:!0,message:"请选择检查时间段",trigger:"blur"}],beCheckUnitIds:[{required:!0,message:"请选择被检单位",trigger:"blur"}]},formData:{taskName:"",taskType:"",project:"",projectCode:"",checkUnit:"XX检查单位",checkDate:"",checkStartDate:"",checkEndDate:"",beCheckUnitIds:"",timingTaskStartDate:"",taskDesc:"",taskRules:"",ruleIds:[]},loading:!1,valueId:[],isClearable:!0,isAccordion:!0,treeData:[],defaultProps:{children:"list",label:"orgName",value:"orgId"}}},watch:{"formData.taskRules":function(t){if(window.console.log("****",t,this.formData.ruleIds),""!=t){var e=this.form.taskRules.find((function(e){return e.id===t}));if(0===this.formData.ruleIds.length){var a={id:e.id,name:e.name};this.formData.ruleIds.push(a)}else{if(this.formData.ruleIds.some((function(e){return t===e.id})))return;var n={id:e.id,name:e.name};this.formData.ruleIds.push(n)}}},"formData.checkDate":{handler:function(t){t?(this.formData.checkStartDate=t[0],this.formData.checkEndDate=t[1]):(this.formData.checkStartDate="",this.formData.checkEndDate="")},deep:!0},"formData.projectCode":{handler:function(t){if(t){var e=this.form.projectList.find((function(e){return e.id===t}));this.formData.project=e&&e.name||""}else this.formData.project=""},deep:!0}},computed:{optionData:function(){var t=JSON.parse(JSON.stringify(this.treeData));return t.filter((function(e){var a=t.filter((function(t){return e.id==t.id}));return a.length>0&&(e.children=a),0==e.id}))}},mounted:function(){},methods:{getOrgData:function(){var t=this;this.getOrgTreeData().then((function(e){Array.isArray(e)&&0!==e.length?t.treeData=e:t.treeData=[]})).finally((function(){}))},getProject_list:function(){var t=this;this.getProjectList().then((function(e){Array.isArray(e)&&0!==e.length?t.form.projectList=e.map((function(t){return{id:t,name:t}})):t.form.projectList=[]})).finally((function(){}))},openDialog:function(){this.initForm(),this.processChange(""),this.dialogVisible=!0,this.formData={taskName:"",taskType:"",project:"",projectCode:"",checkUnit:"XX检查单位",checkDate:"",checkStartDate:"",checkEndDate:"",beCheckUnitIds:"",timingTaskStartDate:"",taskDesc:"",taskRules:"",ruleIds:[]}},closeDialog:function(){this.dialogVisible=!1,this.loading=!1,this.$refs["form"].resetFields(),this.valueId=[],this.$refs.selectTreeRef.clearHandle(),this.$emit("closeDialog")},sureDialog:function(){var t=this;this.$refs.form.validate((function(e){e&&t.$emit("addTableData",JSON.parse(JSON.stringify(t.formData)))}))},processChange:function(t){var e=this,a=this.form.process.find((function(e){return e.id==t}));this.formData.businessProcessId=a&&a.pId||"",this.getTaskProcess({ywlcId:t}).then((function(t){window.console.log(t),Array.isArray(t)&&0!==t.length?e.form.taskRules=t.map((function(t){return{id:t.code,name:t.name}})):e.form.taskRules=[]})).finally((function(){e.formData.taskRules="",e.clearTaskRulesList()}))},initForm:function(){var t=this;this.getOrgData(),this.getProject_list(),this.getProcessList({usePage:!1}).then((function(e){t.form.process=e?e.map((function(t){return{id:t.ywlcId,pId:t.id,name:t.ywlcName}})):[]})).finally((function(){}))},addTableData:function(){this.$emit("addTableData",this.formData)},editForm:function(t){var e=this;this.initForm(),this.dialogVisible=!0,this.formData.checkDate=[t.checkStartDate,t.checkEndDate],Object.keys(t).forEach((function(a){e.formData[a]=t[a]})),t.processId&&this.processChange(t.processId),t.id&&this.getRuleListById(t.id),t.id&&this.getBeCheckUnitByTaskId(t.id)},getBeCheckUnitByTaskId:function(t){var e=this;this.getBeCheckUnitById({taskId:t}).then((function(t){Array.isArray(t)&&0!==t.length?(e.valueId=t,e.getValue(t)):e.valueId=[]})).finally((function(){}))},getRuleListById:function(t){var e=this;this.getRuleTableListByTaskId({taskId:t}).then((function(t){Array.isArray(t)&&0!==t.length?e.formData.ruleIds=t.map((function(t){return{id:t.ruleId,name:t.ruleName}})):e.formData.ruleIds=[]})).finally((function(){}))},closeTag:function(t){this.formData.ruleIds=this.formData.ruleIds.filter((function(e){return e.id!==t}))},clearTaskRulesList:function(){this.formData.ruleIds=[]},getValue:function(t){var e=this;Array.isArray(t)&&0!==t.length?this.formData.beCheckUnitIds=t.map((function(t){return t[e.defaultProps.value]})).join(","):this.formData.beCheckUnitIds=""}}},u=c,d=(a("830c"),a("2877")),f=Object(d["a"])(u,n,r,!1,null,"09312c2a",null);e["default"]=f.exports},2184:function(t,e,a){"use strict";var n=a("456d2"),r=a.n(n);r.a},"266a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"1"===t.$root.themeHomeChange?"project-manage-page overViewManage_light":"project-manage-page"},[a("div",{staticClass:"form-container"},[a("manage-form",{ref:"projectManageForm",on:{addTableData:t.addTableData,initTable:t.initTable}})],1),a("div",{staticClass:"table-container"},[a("manage-table",{ref:"projectManageTable",attrs:{params:t.params},on:{editTask:t.editTask,exportTable:t.exportTable}})],1)])},r=[],o=a("3c0c"),l=a("79c4"),i=a("1a48"),s={name:"projectManagePage",components:{manageTable:l["default"],manageForm:o["default"]},mixins:[i["a"]],data:function(){return{params:{}}},watch:{},created:function(){},mounted:function(){this.$refs.projectManageTable.initTable({},!0)},methods:{reloadTable:function(){},exportTable:function(){},addTableData:function(t){this.$refs.projectManageTable.tableData.push(t)},editTask:function(t){this.$refs.projectManageForm.editDialogClick(t)},initTable:function(t){window.console.log(t),this.params=t,this.$refs.projectManageTable.initTable(t,!0)}}},c=s,u=(a("faf7"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"41d0ea40",null);e["default"]=d.exports},2909:function(t,e,a){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){return n(t)||r(t)||o()}a.d(e,"a",(function(){return l}))},"2a17":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.valueTitle,clearable:t.clearable},on:{clear:t.clearHandle}},[a("el-option",{staticClass:"options",attrs:{value:t.valueTitle,label:t.valueTitle}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:t.accordion,data:t.options,props:t.props,"node-key":t.props.value,"default-expanded-keys":t.defaultExpandedKey,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick}})],1)],1)},r=[],o=(a("7f7f"),a("2909")),l=(a("ac6a"),{name:"el-tree-select",props:{props:{type:Object,default:function(){return{value:"id",label:"title",children:"children"}}},options:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},clearable:{type:Boolean,default:function(){return!0}},accordion:{type:Boolean,default:function(){return!1}}},data:function(){return{filterText:"",valueId:"",valueTitle:"",defaultExpandedKey:[],selectData:[]}},mounted:function(){this.initHandle()},methods:{initHandle:function(){var t=this;Array.isArray(this.value)&&0!==this.value.length&&(this.value.forEach((function(e){t.valueTitle+="".concat(e[t.props.label],"，")})),this.selectData=JSON.parse(JSON.stringify(this.value)),this.defaultExpandedKey=Object(o["a"])(this.value.map((function(e){return e[t.props.value]})))),this.initScroll()},initScroll:function(){this.$nextTick((function(){var t=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],e=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");t.style.cssText="margin: 0px; max-height: none; overflow: hidden;",e.forEach((function(t){return t.style.width=0}))}))},handleNodeClick:function(t){var e=this;if(!Array.isArray(t[this.props.children])||0===t[this.props.children].length){var a="";this.selectData.some((function(a){return a[e.props.value]==t[e.props.value]}))||(this.selectData.push(t),this.selectData.forEach((function(t){return a+="".concat(t[e.props.label],"，")})),this.valueTitle=a,this.valueId=t[this.props.value],this.$emit("getValue",this.selectData),this.defaultExpandedKey=[])}},clearHandle:function(){this.valueTitle="",this.valueId="",this.defaultExpandedKey=[],this.selectData=[],this.clearSelected(),this.$emit("getValue",null)},clearSelected:function(){var t=document.querySelectorAll("#tree-option .el-tree-node");t.forEach((function(t){return t.classList.remove("is-current")}))},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)}},watch:{value:function(){this.initHandle()},filterText:function(t){this.$refs.selectTree.filter(t)}}}),i=l,s=(a("a113"),a("2877")),c=Object(s["a"])(i,n,r,!1,null,"732a1924",null);e["default"]=c.exports},3835:function(t,e,a){"use strict";function n(t){if(Array.isArray(t))return t}function r(t,e){var a=[],n=!0,r=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)if(a.push(l.value),e&&a.length===e)break}catch(s){r=!0,o=s}finally{try{n||null==i["return"]||i["return"]()}finally{if(r)throw o}}return a}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){return n(t)||r(t,e)||o()}a.d(e,"a",(function(){return l}))},"3c0c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"1"===t.$root.themeHomeChange?"project-manage-form_light":"project-manage-form"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"84px","label-suffix":"："}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("bda-button",{staticStyle:{background:"#4389F9"},on:{click:t.addDialogClick}},[t._v("新建合规任务")])],1),a("el-col",{attrs:{span:5}},[a("bda-form-item",{attrs:{label:"任务类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form.taskType,callback:function(e){t.$set(t.form,"taskType",e)},expression:"form.taskType"}},t._l(t.taskTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("bda-form-item",{attrs:{label:"检查时间"}},[a("bda-date-picker",{attrs:{clearable:!0,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.checkDate,callback:function(e){t.checkDate=e},expression:"checkDate"}})],1)],1),a("el-col",{attrs:{span:5}},[a("bda-form-item",{attrs:{label:"更新时间"}},[a("bda-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","value-format":"yyyy-MM-dd HH:mm:ss",clearable:!0},model:{value:t.updateDate,callback:function(e){t.updateDate=e},expression:"updateDate"}})],1)],1),a("el-col",{attrs:{span:4}},[a("bda-search-input",{staticStyle:{width:"calc(100% - 20px)","margin-left":"20px"},attrs:{placeholder:"请输入关键字"},on:{search:function(e){return t.searchByKeyVal(t.keyword)},clear:function(e){return t.searchByKeyVal(t.keyword)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1)],1),a("add-dialog",{ref:"addDialogRef",on:{addTableData:t.addTableData,closeDialog:function(e){return t.initTable(t.form)}}})],1)},r=[],o=a("0053"),l=a("1a48"),i={components:{addDialog:o["default"]},name:"projectManageForm",mixins:[l["a"]],data:function(){return{btnStatus:"专项性检查",checkDate:null,updateDate:null,taskTypeOptions:[{value:"1",label:"实时性"},{value:"2",label:"专项性"},{value:"3",label:"计划性"}],keyword:"",form:{taskType:""},rules:{}}},watch:{form:{handler:function(t){this.initTable(t)},immediate:!1,deep:!0},checkDate:{handler:function(t){t?(this.form.checkStartDate=t[0],this.form.checkEndDate=t[1]):(this.form.checkEndDate="",this.form.checkStartDate=""),this.initTable(this.form)},deep:!0},updateDate:{handler:function(t){this.form.updateDate=t||"",this.initTable(this.form)},deep:!0}},methods:{searchByKeyVal:function(t){this.form["keyword"]=JSON.parse(JSON.stringify(t)),this.initTable(this.form)},initTable:function(t){this.$emit("initTable",t)},goBack:function(){window.history.go(-1)},addDialogClick:function(){this.$refs.addDialogRef.openDialog()},editDialogClick:function(t){this.$refs.addDialogRef.editForm(t)},importDocClick:function(){this.$refs.importDocRef.openDialog()},addTableData:function(t){var e=this;this.$refs.addDialogRef.loading=!0,t.ruleIds=t.ruleIds.map((function(t){return t.id})).join(","),t.deptId="暂时无法获取部门ID",this[t.id?"updateRiskTask":"addRiskTask"](t).then((function(a){window.console.log(a),e.$message({message:"".concat(t.id?"修改成功":"新增成功"),type:"success"}),e.$refs.addDialogRef.closeDialog(),e.$emit("initTable",e.form)})).catch((function(t){e.$message.error(t.code)})).finally((function(){e.$refs.addDialogRef.loading=!1}))}}},s=i,c=(a("b03a"),a("2877")),u=Object(c["a"])(s,n,r,!1,null,"574ff921",null);e["default"]=u.exports},"456d2":function(t,e,a){},"79c4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"projectManageTableRef",class:"1"===t.$root.themeHomeChange?"project-manage-table_light":"project-manage-table"},[a("bda-scroll-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{background:"",data:t.tableData,"popper-append-to-body":"",border:"",blInitLoad:!1,"tooltip-effect":"light","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{select:t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"60","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"id",label:"任务编号","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(t._s(e.row.id))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t._v("\n            "+t._s(e.row.id)+"\n          ")])])]}}])}),a("el-table-column",{attrs:{prop:"taskName",label:"任务名称","min-width":"242","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskDesc",label:"任务说明","min-width":"270","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskType",label:"任务类型","min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.options.taskTypeOptions[e.row.taskType])+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"process",label:"业务流程","min-width":"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"checkUnit",label:"检查单位","min-width":"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"timeQuantum",label:"检查时间段","min-width":"200","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.checkStartDate+"~"+e.row.checkEndDate)+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"timingTaskStartDate",label:"定时任务开始时间","min-width":"220","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskPerformSync",label:"执行周期","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskStatus",label:"任务状态","min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.options.taskStatus[e.row.taskStatus]||""))])]}}])}),a("el-table-column",{attrs:{prop:"amountInvolved",label:"涉及金额","min-width":"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.amountInvolved||"0")+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"regularOutliers",label:"规则异常数","min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.regularOutliers||"0")+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"updateDate",label:"更新时间","min-width":"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"updateBtn",attrs:{type:"text",disabled:!(1==e.row.taskStatus||4==e.row.taskStatus)},on:{click:function(a){return t.editTask(e.row)}}},[t._v("编辑")]),a("el-button",{staticClass:"DetailBtn",attrs:{type:"text"},on:{click:function(a){return t.openOverIncompatible(e.row)}}},[t._v("查看详情")]),a("el-button",{staticClass:"stopBtn",attrs:{type:"text",disabled:!e.row.taskStatus},on:{click:function(a){return t.changeTaskStatus(e.row)}}},[t._v(t._s(2==e.row.taskStatus||3==e.row.taskStatus||5==e.row.taskStatus?"停用":1==e.row.taskStatus||4==e.row.taskStatus?"启用":"异常"))]),a("el-button",{staticClass:"DeleteBtn",attrs:{type:"text",disabled:!(1==e.row.taskStatus||4==e.row.taskStatus)},on:{click:function(a){return t.deleteTaskItem(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pageInfoConfig.page,"page-sizes":[10,20,30,40,50],"page-size":t.pageInfoConfig.rows,background:"",layout:"prev, pager, next, sizes, jumper, total",total:t.pageInfoConfig.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},r=[],o=a("3835"),l=(a("ac6a"),a("1a48")),i=a("4328"),s=a.n(i),c={name:"projectManageTable",mixins:[l["a"]],data:function(){return{tableLoading:!1,tableData:[],options:{taskTypeOptions:{1:"实时性",2:"专项性",3:"计划性"},taskStatus:{1:"已创建",2:"进行中",3:"已完成",4:"已停用",5:"已启用"},taskPerformSync:[{id:1,value:"one-day",name:"每天"},{id:2,value:"three-day",name:"每三天"},{id:3,value:"a-week",name:"每一周"},{id:4,value:"half-a-month",name:"每半个月"},{id:5,value:"a-month",name:"每一个月"},{id:6,value:"three-month",name:"每三个月"},{id:7,value:"half-a-year",name:"每半年"},{id:8,value:"a-month",name:"每一年"}]},pageInfoConfig:{page:1,rows:20,total:0},tableHeight:"",selectData:[]}},props:{params:{type:Object,default:function(){return{}}}},watch:{},computed:{},mounted:function(){},methods:{initTable:function(t,e){var a=this;e&&this.setPages(),this.tableData=[],t.current=this.pageInfoConfig.page,t.size=this.pageInfoConfig.rows,this.tableLoading=!0,this.getRiskTaskList(t).then((function(t){t?(a.tableData=t.list,a.setPages(t.pageNum,t.pageSize,t.total)):a.setPages()})).finally((function(){a.tableLoading=!1}))},setPages:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.pageInfoConfig={page:t,rows:e,total:a}},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.table.toggleRowSelection(t)})):this.$refs.table.clearSelection()},handleSelectionChange:function(t){this.selectData=t},handleSizeChange:function(t){this.pageInfoConfig.rows=t,this.initTable(this.params)},handleCurrentChange:function(t){this.pageInfoConfig.page=t,this.initTable(this.params)},editTask:function(t){this.$emit("editTask",JSON.parse(JSON.stringify(t)))},changeTaskStatus:function(t){var e=this,a=2==t.taskStatus||3==t.taskStatus||5==t.taskStatus?['<strong style="color: #F56C6C;">停用</strong>',0]:1==t.taskStatus||4==t.taskStatus?['<strong style="color: #67C23A;">启用</strong>',1]:["* 错误 *",""],n=Object(o["a"])(a,2),r=n[0],l=n[1];this.$confirm("此操作将 ".concat(r," 该合规任务, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){e.tableLoading=!0,e.taskStatusChange({taskId:t.id,status:l}).then((function(){e.$message.success({dangerouslyUseHTMLString:!0,message:"合规任务 "+r+" 成功！"})})).finally((function(){e.initTable(e.params)}))})).catch((function(){}))},deleteTaskItem:function(t){var e=this;this.$confirm("此操作将删除该合规任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.tableLoading=!0,e.deleteTaskById(s.a.stringify({taskId:t.id})).then((function(){e.$message.success("合规任务删除成功！")})).finally((function(){e.initTable(e.params)}))})).catch((function(){}))},openOverIncompatible:function(t){this.$router.push({path:"/overIncompatible",query:{index:"3-2",taskId:t.id,actNav:this.$route.query.actNav}})}}},u=c,d=(a("2184"),a("2877")),f=Object(d["a"])(u,n,r,!1,null,"27052e2b",null);e["default"]=f.exports},"830c":function(t,e,a){"use strict";var n=a("f304"),r=a.n(n);r.a},"96e7":function(t,e,a){},a113:function(t,e,a){"use strict";var n=a("f7e1"),r=a.n(n);r.a},b03a:function(t,e,a){"use strict";var n=a("c5fd"),r=a.n(n);r.a},c5fd:function(t,e,a){},dd2a:function(t,e,a){"use strict";var n=a("db49"),r=a("ab3e"),o=n["b"]+"/organization/tree";function l(t){return Object(r["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:o})}e["a"]={data:function(){return{common:{list:[],page:null,limit:null,total:0,model:null}}},methods:{getOrgTreeData:function(t){return l(t).then((function(t){return t}))}}}},f304:function(t,e,a){},f7e1:function(t,e,a){},faf7:function(t,e,a){"use strict";var n=a("96e7"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-488ead2e.76e3735c.js.map