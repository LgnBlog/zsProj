(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e28e784e","chunk-54304760"],{"2bff":function(t,e,a){"use strict";var s=a("5462"),i=a.n(s);i.a},"471a":function(t,e,a){"use strict";var s=a("7c82"),i=a.n(s);i.a},5462:function(t,e,a){},"71ee":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"1"===t.$root.themeHomeChange?"detailsList_light":"detailsList"},[a("div",{staticClass:"header"},[a("el-button",{staticClass:"btn",on:{click:t.goHome}},[t._v("返回")]),a("span",{staticClass:"title"},[t._v(t._s(t.paramsInfo.name))])],1),a("div",{staticClass:"content"},[a("basicMsgTable",{ref:"basicMsgTable",attrs:{data:t.basicMsgList,loading:t.basicMsgTableLoading}}),a("defectTable",{ref:"defectTable",attrs:{orderId:t.paramsInfo.orderId,taskId:t.basicMsgList.taskId,selectIds:t.selectIds},on:{selectChange:function(e){return t.selectChange(e)}}}),0!=t.selectMsgs.length?a("div",{staticClass:"formBox"},["取证阶段"===t.stage||"不整改举证"===t.stage?a("div",{staticClass:"rectification"},[t._m(0),a("el-radio-group",{on:{change:t.rectificationChange},model:{value:t.isRectification,callback:function(e){t.isRectification=e},expression:"isRectification"}},[a("el-radio",{attrs:{label:"isTrue"}},[t._v("是")]),a("el-radio",{attrs:{label:"isFalse"}},[t._v("否")])],1)],1):t._e(),a("div",{staticClass:"stepBox"},[a("div",{staticStyle:{"text-align":"center",width:"30%","min-width":"400px"}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:t.radioChange},model:{value:t.stage,callback:function(e){t.stage=e},expression:"stage"}},[a("el-radio-button",{attrs:{label:"全部"}}),t._l(t.radioList[t.isRectification],(function(t,e){return a("el-radio-button",{key:e,attrs:{label:t}})}))],2)],1),a("el-steps",{key:t.isRectification,staticStyle:{"margin-left":"20px",width:"60%"},attrs:{active:t.stepsList[t.isRectification][t.stage],space:200}},t._l(t.radioList[t.isRectification],(function(t,e){return a("el-step",{key:e,attrs:{title:t}})})),1)],1),a("defectForm",{ref:"defectForm",attrs:{stage:t.stage,loading:t.formLoading,isRectification:t.isRectification,data:t.defectFormData,defectIds:t.defectIds,orderId:t.paramsInfo.orderId},on:{cancel:t.defectFormCancel}})],1):a("div",{staticClass:"tipsBox"},[t._v("请选中所要执行的流程的缺陷")])],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("strong",{staticStyle:{color:"orangered"}},[t._v("* ")]),t._v(" 是否进行整改：")])}],n=(a("8e6e"),a("ac6a"),a("456d"),a("28a5"),a("ade3")),c=a("a59a"),o=a("270b"),r=a("1a79"),d=a("f0af");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"detailsList",components:{basicMsgTable:c["default"],defectTable:o["default"],defectForm:r["default"]},mixins:[d["a"]],props:{},data:function(){return{selectIds:[],paramsInfo:{},isRectification:"isTrue",selectMsgs:[],tableStatus:{},basicMsgTableLoading:!1,formLoading:!1,defectIds:[],processCodeOption:{"全部":0,"取证阶段":1,"确认阶段":2,"整改阶段":3,"修订与反馈":4,"不整改举证":5,"举证确认":6},stageList:{isTrue:{0:"取证阶段",1:"取证阶段",2:"确认阶段",3:"整改阶段",4:"修订与反馈",5:"修订与反馈",6:"取证阶段"},isFalse:{7:"不整改举证",8:"举证确认"}},stepsList:{isTrue:{"取证阶段":0,"确认阶段":1,"整改阶段":2,"修订与反馈":3},isFalse:{"不整改举证":0,"举证确认":1}},radioList:{isTrue:["取证阶段","确认阶段","整改阶段","修订与反馈"],isFalse:["不整改举证","举证确认"]},stage:"取证阶段",defectFormData:{},basicMsgList:{}}},created:function(){this.paramsInfo=JSON.parse(window.decodeURIComponent(window.atob(this.$route.query.params))),this.init()},mounted:function(){},methods:{init:function(){var t=this;setTimeout((function(){var e=JSON.parse(localStorage.getItem("defectProcessInfo"));e&&"1"==t.$route.query.isRelation&&(t.stage=e.stage,t.defectIds=e.defectIds,t.isRectification=e.isRectification,t.$refs["defectTable"].toggleSelection(e.defectIds),setTimeout((function(){t.defectFormData=f({},e.formData,{knowledgeIds:t.$route.query.knowledgeIds?t.$route.query.knowledgeIds.split(","):[]}),localStorage.removeItem("defectProcessInfo")}),500))}),1e3),this.getBasicInfoById()},getBasicInfoById:function(){var t=this;this.basicMsgTableLoading=!0,this.getDisposalTaskInfo({orderId:this.paramsInfo.orderId}).then((function(e){t.basicMsgList=e||{}})).finally((function(){t.basicMsgTableLoading=!1}))},radioChange:function(){this.init()},rectificationChange:function(t){this.stage="isTrue"===t?"取证阶段":"不整改举证"},selectChange:function(t){if(window.console.log(t),0!=t.length){for(var e in this.defectIds=t.map((function(t){return t.id})),this.stageList)this.stageList[e][t[0].defectStatus]&&(this.stage=this.stageList[e][t[0].defectStatus],this.isRectification=e,this.selectMsgs=t);this.getProcessInfoByIds(t.map((function(t){return t.id})),this.paramsInfo.orderId)}else this.selectMsgs=[]},getProcessInfoByIds:function(t,e){var a=this;this.formLoading=!0,this.getProcessDetail({defectIds:t,orderId:e,processCode:this.processCodeOption[this.stage]}).then((function(e){t.length>1&&e&&0!==e.length?(a.$message.warning("所选缺陷清单行中  ".concat(a.$refs["defectTable"].searchTableNames(e)," 已有数据，无法进行多选！ ")),a.defectFormCancel(),a.defectFormData={}):a.defectFormData=e&&e[0]||{}})).catch((function(){a.defectFormCancel()})).finally((function(){a.formLoading=!1}))},defectFormCancel:function(){this.$refs["defectTable"].getTableList(!0),this.$refs["defectTable"].toggleSelection()},goHome:function(){this.$router.push({path:"/defectView",query:{index:"4-2",actNav:this.$route.query.actNav}})}}},g=u,b=(a("2bff"),a("2877")),h=Object(b["a"])(g,s,i,!1,null,"54d16b74",null);e["default"]=h.exports},"7c82":function(t,e,a){},a59a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"1"===t.$root.themeHomeChange?"basicMsgTable_light":"basicMsgTable",attrs:{id:"basicMsgTable"}},[a("div",{staticClass:"header"},[t._v("合规检查任务基本信息")]),a("div",{staticClass:"content"},[a("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table",attrs:{border:"0","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("tr",[a("td",{staticClass:"tableHeader"},[t._v("单据编号：")]),a("td",[t._v(t._s(t.data.orderId))]),a("td",{staticClass:"tableHeader"},[t._v("任务 / 单据名称：")]),a("td",[t._v(t._s(t.data.taskOrOrderName))]),a("td",{staticClass:"tableHeader"},[t._v("检查单位：")]),a("td",[t._v(t._s(t.data.checkUnit))]),a("td",{staticClass:"tableHeader"},[t._v("检查时间段：")]),a("td",[t._v(t._s(t.data.checkBeginDate&&t.data.checkEndDate?t.data.checkBeginDate+"~"+t.data.checkEndDate:""))])]),a("tr",[a("td",{staticClass:"tableHeader"},[t._v("任务编号：")]),a("td",[t._v(t._s(t.data.taskId))]),a("td",{staticClass:"tableHeader"},[t._v("单据日期：")]),a("td",[t._v(t._s(t.data.orderDate))]),a("td",{staticClass:"tableHeader"},[t._v("被检查单位：")]),a("td",[t._v(t._s(t.data.checkedUnit))]),a("td",{staticClass:"tableHeader"},[t._v("任务类别：")]),a("td",[t._v(t._s(t.getTableOptionByName(t.data.taskType,"name","id","taskType")))])]),a("tr",[a("td",{staticClass:"tableHeader"},[t._v("任务说明：")]),a("td",{attrs:{colspan:"7"}},[t._v(t._s(t.data.taskDesc))])])])])])},i=[],n=(a("7514"),{name:"basicMsgTable",components:{},props:{data:{type:Object,default:function(){return{}}},loading:{type:Boolean,default:function(){return!1}}},comments:{},data:function(){return{tableOption:{taskType:[{id:"1",name:"实时性检查"},{id:"2",name:"计划性检查"},{id:"3",name:"专项性检查"}]}}},watch:{},mounted:function(){},methods:{getTableOptionByName:function(t,e,a,s){var i=this.tableOption[s].find((function(e){return e[a]==t}));return i&&i[e]||""}}}),c=n,o=(a("471a"),a("2877")),r=Object(o["a"])(c,s,i,!1,null,"7300650a",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-e28e784e.f1b656fe.js.map