(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15f6e83e","chunk-2d22bf25"],{"16b4":function(t,e,a){},"1a79":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"1"===t.$root.themeHomeChange?"defect-form_light":"defect-form"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:t.stage,ref:"ruleForm",staticClass:"formList",attrs:{inline:!0,model:t.formData,"label-position":"right","label-width":"120px",rules:t.rules[t.stage],"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},["isTrue"===t.isRectification?a("div",["全部"==t.stage||"取证阶段"===t.stage?a("div",[a("div",{staticClass:"title"},[t._v("取证阶段")]),a("el-form-item",{staticClass:"formItem",attrs:{label:"责任部门: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.qzZrbm))])]),a("el-form-item",{staticClass:"formItem-right",attrs:{label:"是否问责: ","label-width":"200px",prop:"ifAccountability"}},[a("el-radio-group",{model:{value:t.formData.ifAccountability,callback:function(e){t.$set(t.formData,"ifAccountability",e)},expression:"formData.ifAccountability"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-form-item",{staticClass:"formItem",attrs:{label:"取证人: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.qzPerson))])]),a("el-form-item",{staticClass:"formItem-right",attrs:{label:"整改指引建议: ","label-width":"200px",prop:"modifyOpinion"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入",clearable:""},model:{value:t.formData.modifyOpinion,callback:function(e){t.$set(t.formData,"modifyOpinion",e)},expression:"formData.modifyOpinion"}})],1),a("el-form-item",{staticClass:"formItem",attrs:{label:"取证材料说明: ",prop:"qzMaterialDesc"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入",clearable:""},model:{value:t.formData.qzMaterialDesc,callback:function(e){t.$set(t.formData,"qzMaterialDesc",e)},expression:"formData.qzMaterialDesc"}})],1),a("el-form-item",{staticClass:"formItem-right",attrs:{label:"需修订法律法规/制度规范等: ","label-width":"200px",prop:"ifXdflfgZdgf"}},[a("el-radio-group",{model:{value:t.formData.ifXdflfgZdgf,callback:function(e){t.$set(t.formData,"ifXdflfgZdgf",e)},expression:"formData.ifXdflfgZdgf"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{key:Array.isArray(t.formData[this.fileOption[this.stage]])&&t.formData[this.fileOption[this.stage]].lenght,staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"上传附件: ",prop:this.fileOption[this.stage]}},[a("el-upload",{ref:"uploadObj",staticStyle:{display:"flex","flex-wrap":"wrap"},attrs:{action:t.fileUrl+t.defectIds.join(","),"list-type":"picture-card","on-success":t.handleSuccess,"on-error":t.handleError,"file-list":t.formData.fileList,"auto-upload":!0,accept:".xls, .xlsx, .docx, .pdf","before-upload":t.beforeUpload},scopedSlots:t._u([{key:"file",fn:function(e){var i=e.file;return a("div",{},[a("div",{staticClass:"fileClass"},[a("i",{staticClass:"el-icon-document"},[a("el-tooltip",{staticClass:"btn-trip",attrs:{effect:"dark",content:i.name,placement:"bottom"}},[a("span",[a("p",[t._v(t._s(i.name))])])])],1),a("i",{staticClass:"el-icon-download",on:{click:function(e){return t.projectDownload(i)}}},[a("el-tooltip",{staticClass:"btn-trip",attrs:{effect:"dark",content:i.name,placement:"bottom"}},[a("span",[a("p",[t._v("下载文件")])])])],1),a("el-popconfirm",{attrs:{"popper-class":"1"===t.$root.themeHomeChange?"popconfirmClass_light":"popconfirmClass","confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"是否删除 "+i.name+" ？"},on:{confirm:function(e){return t.deleteUploadItem(i)}}},[a("i",{staticClass:"deleteIcon el-icon-circle-close",attrs:{slot:"reference"},slot:"reference"})])],1)])}}],null,!1,1838701334)},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"},[a("p",[t._v("上传附件")])])]),a("p",{staticStyle:{color:"#bbb","font-size":"10px"}},[t._v("文件后缀名可为xls 或xlsx （即Excel格式）、word、pdf等，文件大小不得大于30M。")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"formItem-right",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"归口部门: ","label-width":"200px",prop:"accountabilityDepartment"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",placeholder:"请选择",clearable:""},model:{value:t.formData.accountabilityDepartment,callback:function(e){t.$set(t.formData,"accountabilityDepartment",e)},expression:"formData.accountabilityDepartment"}},[a("el-option",{attrs:{label:"办公室",value:"办公室"}}),a("el-option",{attrs:{label:"合规与监审部",value:"合规与监审部"}}),a("el-option",{attrs:{label:"系统规划部",value:"系统规划部"}}),a("el-option",{attrs:{label:"资产管理部",value:"资产管理部"}}),a("el-option",{attrs:{label:"市场营销部",value:"市场营销部"}}),a("el-option",{attrs:{label:"安全监管部",value:"安全监管部"}}),a("el-option",{attrs:{label:"人力资源部",value:"人力资源部"}}),a("el-option",{attrs:{label:"党建工作部",value:"党建工作部"}}),a("el-option",{attrs:{label:"创新与数字化部",value:"创新与数字化部"}}),a("el-option",{attrs:{label:"财务部",value:"财务部"}})],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"formItem-right",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"需修订建议说明: ","label-width":"200px",prop:"revisedOpinion"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入",clearable:""},model:{value:t.formData.revisedOpinion,callback:function(e){t.$set(t.formData,"revisedOpinion",e)},expression:"formData.revisedOpinion"}})],1)],1)],1)],1)],1)],1):t._e(),"全部"==t.stage?a("el-divider"):t._e(),"全部"==t.stage||"确认阶段"===t.stage?a("div",[a("div",{staticClass:"title"},[t._v("确认阶段")]),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"责任部门: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.confirmZrbm))])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"确认人: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.confirmPerson))])])],1)],1),a("el-form-item",{staticClass:"formItem",attrs:{label:"审批意见: ",prop:"spOpinion"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入",clearable:""},model:{value:t.formData.spOpinion,callback:function(e){t.$set(t.formData,"spOpinion",e)},expression:"formData.spOpinion"}})],1)],1):t._e(),"全部"==t.stage?a("el-divider"):t._e(),"全部"==t.stage||"整改阶段"===t.stage?a("div",[a("div",{staticClass:"title"},[t._v("整改阶段")]),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"问责部门: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.zgZrbm))])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"整改人: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.zgPerson))])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"是否问责: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.ifAccountability?"是":"否"))])])],1)],1),a("el-form-item",{staticClass:"formItem",attrs:{label:"整改意见: ",prop:"zgOpinion"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入",clearable:""},model:{value:t.formData.zgOpinion,callback:function(e){t.$set(t.formData,"zgOpinion",e)},expression:"formData.zgOpinion"}})],1),a("el-form-item",{key:Array.isArray(t.formData[this.fileOption[this.stage]])&&t.formData[this.fileOption[this.stage]].lenght,staticClass:"formItem-right",attrs:{label:"上传附件: ","label-width":"200px",prop:this.fileOption[this.stage]}},[a("el-upload",{ref:"uploadObj",staticStyle:{display:"flex","flex-wrap":"wrap"},attrs:{action:t.fileUrl+t.defectIds.join(","),"list-type":"picture-card","on-success":t.handleSuccess,"on-error":t.handleError,"file-list":t.formData.fileList,"auto-upload":!0,accept:".xls, .xlsx, .docx, .pdf","before-upload":t.beforeUpload},scopedSlots:t._u([{key:"file",fn:function(e){var i=e.file;return a("div",{},[a("div",{staticClass:"fileClass"},[a("i",{staticClass:"el-icon-document"},[a("el-tooltip",{staticClass:"btn-trip",attrs:{effect:"dark",content:i.name,placement:"bottom"}},[a("span",[a("p",[t._v(t._s(i.name))])])])],1),a("i",{staticClass:"el-icon-download",on:{click:function(e){return t.projectDownload(i)}}},[a("el-tooltip",{staticClass:"btn-trip",attrs:{effect:"dark",content:i.name,placement:"bottom"}},[a("span",[a("p",[t._v("下载文件")])])])],1),a("el-popconfirm",{attrs:{"popper-class":"1"===t.$root.themeHomeChange?"popconfirmClass_light":"popconfirmClass","confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"是否删除 "+i.name+" ？"},on:{confirm:function(e){return t.deleteUploadItem(i)}}},[a("i",{staticClass:"deleteIcon el-icon-circle-close",attrs:{slot:"reference"},slot:"reference"})])],1)])}}],null,!1,1838701334)},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"},[a("p",[t._v("上传附件")])])]),a("p",{staticStyle:{color:"#bbb","font-size":"10px"}},[t._v("文件后缀名可为xls 或xlsx （即Excel格式）、word、pdf等，文件大小不得大于30M。")])],1)],1):t._e(),"全部"==t.stage?a("el-divider"):t._e(),"全部"==t.stage||"修订与反馈"===t.stage?a("div",[a("div",{staticClass:"title"},[t._v("修订与反馈")]),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"归口部门: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.revisedFeedbackDepartment))])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"责任人: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.jzZrr))])])],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"formItem-right",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"法律法规/制度规范等修订反馈: ","label-width":"210px",prop:"flfgZdgfRevisedFeedback"}},[a("el-radio-group",{model:{value:t.formData.flfgZdgfRevisedFeedback,callback:function(e){t.$set(t.formData,"flfgZdgfRevisedFeedback",e)},expression:"formData.flfgZdgfRevisedFeedback"}},[a("el-radio",{attrs:{label:1}},[t._v("修订")]),a("el-radio",{attrs:{label:0}},[t._v("不予修订")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"修订与反馈说明: ",prop:"revisedFeedback"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入",clearable:""},model:{value:t.formData.revisedFeedback,callback:function(e){t.$set(t.formData,"revisedFeedback",e)},expression:"formData.revisedFeedback"}})],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{staticClass:"formItem-right",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"关联需修订的法律法规/制度规范等: ",prop:"knowledgeIds","label-width":"210px"}},[a("span",{},[t._v("已选择 "+t._s(t.formData.knowledgeIds&&t.formData.knowledgeIds.length||0)+" 条")]),a("span",{staticStyle:{"margin-left":"72px"}},[a("el-button",{attrs:{icon:"el-icon-paperclip"},on:{click:t.relationData}},[t._v("关联")]),a("el-button",{attrs:{disabled:!t.formData.knowledgeIds||Array.isArray(t.formData.knowledgeIds)&&0===t.formData.knowledgeIds.length,icon:"el-icon-search"},on:{click:t.showKnowTable}},[t._v("查看详情")])],1)])],1)],1)],1):t._e()],1):a("div",["全部"==t.stage||"不整改举证"===t.stage?a("div",[a("div",{staticClass:"title"},[t._v("不整改举证")]),a("el-form-item",{staticClass:"formItem-inline",attrs:{label:"不进行整改的举证说明: ","label-width":"120px",prop:"notChangeReasonDesc"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入",clearable:""},model:{value:t.formData.notChangeReasonDesc,callback:function(e){t.$set(t.formData,"notChangeReasonDesc",e)},expression:"formData.notChangeReasonDesc"}})],1),a("el-form-item",{key:Array.isArray(t.formData[this.fileOption[this.stage]])&&t.formData[this.fileOption[this.stage]].lenght,staticClass:"formItem-inline",attrs:{label:"上传附件: ","label-width":"120px",prop:this.fileOption[this.stage]}},[a("el-upload",{ref:"uploadObj",staticStyle:{display:"flex","flex-wrap":"wrap"},attrs:{action:t.fileUrl+t.defectIds.join(","),"list-type":"picture-card","on-success":t.handleSuccess,"on-error":t.handleError,"file-list":t.formData.fileList,"auto-upload":!0,accept:".xls, .xlsx, .docx, .pdf","before-upload":t.beforeUpload},scopedSlots:t._u([{key:"file",fn:function(e){var i=e.file;return a("div",{},[a("div",{staticClass:"fileClass"},[a("i",{staticClass:"el-icon-document"},[a("el-tooltip",{staticClass:"btn-trip",attrs:{effect:"dark",content:i.name,placement:"bottom"}},[a("span",[a("p",[t._v(t._s(i.name))])])])],1),a("i",{staticClass:"el-icon-download",on:{click:function(e){return t.projectDownload(i)}}},[a("el-tooltip",{staticClass:"btn-trip",attrs:{effect:"dark",content:i.name,placement:"bottom"}},[a("span",[a("p",[t._v("下载文件")])])])],1),a("el-popconfirm",{attrs:{"popper-class":"1"===t.$root.themeHomeChange?"popconfirmClass_light":"popconfirmClass","confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"是否删除 "+i.name+" ？"},on:{confirm:function(e){return t.deleteUploadItem(i)}}},[a("i",{staticClass:"deleteIcon el-icon-circle-close",attrs:{slot:"reference"},slot:"reference"})])],1)])}}],null,!1,1838701334)},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"},[a("p",[t._v("上传附件")])])]),a("p",{staticStyle:{color:"#bbb","font-size":"10px"}},[t._v("文件后缀名可为xls 或xlsx （即Excel格式）、word、pdf等，文件大小不得大于30M。")])],1)],1):t._e(),"全部"==t.stage?a("el-divider"):t._e(),"全部"==t.stage||"举证确认"===t.stage?a("div",[a("div",{staticClass:"title"},[t._v("举证确认")]),a("el-form-item",{staticClass:"formItem-inline",attrs:{label:"不进行整改的举证说明: ","label-width":"120px",prop:"notChangeReasonDesc"}},[a("p",{staticClass:"formText",staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v("\n            "+t._s(t.formData.notChangeReasonDesc||"暂无")+"\n          ")])]),a("el-form-item",{staticClass:"formItem-inline",attrs:{label:"举证附件: ","label-width":"120px"}},[Array.isArray(t.formData.jzFileList)&&0!==t.formData.jzFileList.lenght?a("div",{staticClass:"jzFileList"},t._l(t.formData.jzFileList,(function(e,i){return a("div",{key:i,staticClass:"fileClass"},[a("i",{staticClass:"el-icon-document"},[a("el-tooltip",{staticClass:"btn-trip",attrs:{effect:"dark",content:t.getFileName(e),placement:"bottom"}},[a("span",[a("p",[t._v(t._s(t.getFileName(e)))])])])],1),a("i",{staticClass:"el-icon-download",on:{click:function(a){t.projectDownload({name:t.getFileName(e),url:e})}}},[a("el-tooltip",{staticClass:"btn-trip",attrs:{effect:"dark",content:t.getFileName(e),placement:"bottom"}},[a("span",[a("p",[t._v("下载文件")])])])],1)])})),0):a("p",{staticStyle:{color:"#fff","font-size":"12px","font-weight":"bold"}},[t._v("暂无附件")])]),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"责任部门: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.zrbm))])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"formItem",staticStyle:{width:"calc(100% - 10px)"},attrs:{label:"确认人: "}},[a("span",{staticClass:"formText"},[t._v(t._s(t.formData.stageLeader))])])],1)],1),a("el-form-item",{staticClass:"formItem-right",attrs:{label:"举证是否有效: ","label-width":"120px",prop:"jzIfEffective"}},[a("el-radio-group",{model:{value:t.formData.jzIfEffective,callback:function(e){t.$set(t.formData,"jzIfEffective",e)},expression:"formData.jzIfEffective"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-form-item",{staticClass:"formItem-inline",attrs:{label:"确认意见: ",prop:"jzConfirmOpinion"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入",clearable:""},model:{value:t.formData.jzConfirmOpinion,callback:function(e){t.$set(t.formData,"jzConfirmOpinion",e)},expression:"formData.jzConfirmOpinion"}})],1)],1):t._e()],1)]),a("div",{staticStyle:{"text-align":"center",margin:"20px 0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submitForm(0)}}},[t._v("保存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submitForm(1)}}},[t._v("提交")]),a("el-button",{attrs:{disabled:"取证阶段"===t.stage||"不整改取证"===t.stage,size:"mini"},on:{click:function(e){return t.submitForm(-1)}}},[t._v("退回")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.resetForm()}}},[t._v("取消")])],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{title:"关联修订已选列表",visible:t.dialogTableVisible,modal:!1,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.knowTabel,"tooltip-effect":"light",height:t.tableHeight}},[a("el-table-column",{attrs:{prop:"knowledgeName",label:"知识库名称","min-width":"300","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"version",label:"最新版本号","min-width":"100","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"knowledgeType",label:"知识库类别","min-width":"120","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"systemBusinessType",label:"制度业务类别","min-width":"200",align:"center"}}),a("el-table-column",{attrs:{prop:"systemFunctionOrientation",label:"制度功能定位","min-width":"200",align:"center"}}),a("el-table-column",{attrs:{prop:"bbjg",label:"颁布机构","min-width":"200",align:"center"}}),a("el-table-column",{attrs:{prop:"bbsj",label:"颁布时间","min-width":"100","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"updateStatus",label:"修订状态","min-width":"80","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0===e.row.updateStatus?"待修订":"已修订"))]}}])}),a("el-table-column",{attrs:{prop:"department",label:"所属部门","min-width":"120","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"zrgw",label:"岗位名称","min-width":"120","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"creator",label:"创建者","min-width":"100","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"100","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"100","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"updateName",label:"更新人","min-width":"100","show-overflow-tooltip":"",align:"center"}})],1)],1)],1)},o=[],l=(a("8e6e"),a("456d"),a("ac6a"),a("8615"),a("6762"),a("7f7f"),a("ade3")),s=a("f0af"),r=a("db49"),n=a("8f22"),c=a.n(n);function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(a,!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={name:"formList",components:{},mixins:[s["a"]],props:{data:{type:Object,default:function(){return{}}},stage:{type:String,default:function(){return""}},defectIds:{type:Array,default:function(){return[]}},isRectification:{type:String,default:function(){return"isTrue"}},loading:{type:Boolean,default:function(){return!1}},orderId:{type:String,default:function(){return""}}},data:function(){return{tableLoading:!1,knowTabel:[],fileUrl:r["b"]+"/disposal/file/upload?defectStr=",formLoading:!1,tableHeight:.6*window.innerHeight-70,dialogTableVisible:!1,formData:{},fileOption:{"取证阶段":"qzProcessFileList","整改阶段":"zgFileList","不整改举证":"jzFileList"},processCodeOption:{"全部":0,"取证阶段":1,"确认阶段":2,"整改阶段":3,"修订与反馈":4,"不整改举证":5,"举证确认":6},rules:{"取证阶段":{ifAccountability:[{required:!0,message:"请选择",trigger:"change"}],modifyOpinion:[{required:!0,message:"请输入",trigger:"blur"}],qzMaterialDesc:[{required:!0,message:"请输入",trigger:"blur"}],ifXdflfgZdgf:[{required:!0,message:"请选择",trigger:"change"}],qzProcessFileList:[{required:!0,message:"请上传",trigger:"change"}],accountabilityDepartment:[{required:!0,message:"请选择",trigger:"change"}],revisedOpinion:[{required:!0,message:"请输入",trigger:"blur"}]},"确认阶段":{spOpinion:[{required:!0,message:"请输入",trigger:"blur"}]},"整改阶段":{zgOpinion:[{required:!0,message:"请输入",trigger:"blur"}],zgFileList:[{required:!0,message:"请上传",trigger:"change"}]},"修订与反馈":{flfgZdgfRevisedFeedback:[{required:!0,message:"请选择",trigger:"change"}],revisedFeedback:[{required:!0,message:"请输入",trigger:"blur"}],knowledgeIds:[{required:!0,message:"请关联所要修订的内容",trigger:"change"}]},"不整改举证":{notChangeReasonDesc:[{required:!0,message:"请输入不进行整改的举证说明",trigger:"blur"}],jzFileList:[{required:!0,message:"请上传",trigger:"change"}]},"举证确认":{jzIfEffective:[{required:!0,message:"请选择",trigger:"change"}],jzConfirmOpinion:[{required:!0,message:"请输入确认意见",trigger:"blur"}]}}}},watch:{loading:function(t){this.formLoading=t},stage:function(t){var e=this,a=Array.isArray(this.formData[this.fileOption[t]])&&this.formData[this.fileOption[t]].map((function(t){return{name:e.getFileName(t),url:t}}))||[];this.formData.fileList=a,this.$forceUpdate()},data:{handler:function(t){var e=this,a=Array.isArray(t[this.fileOption[this.stage]])&&t[this.fileOption[this.stage]].map((function(t){return{name:e.getFileName(t),url:t}}))||[];this.formData=JSON.parse(JSON.stringify(p({},t,Object(l["a"])({fileList:a},this.fileOption[this.stage],[]))))},deep:!0,immediate:!1},isRectification:{handler:function(t){this.formData.ifDisposal="isTrue"==t?1:0},deep:!0,immediate:!0},"formData.fileList":{handler:function(t){this.formData[this.fileOption[this.stage]]=t.map((function(t){return t.url}))},deep:!0}},mounted:function(){},created:function(){},methods:{getFileName:function(t){var e=t.lastIndexOf("/"),a=t.lastIndexOf("\\"),i=Math.max(e,a);return i<0?t:t.substring(i+1)},projectDownload:function(t){window.console.log(t,r["b"]),t.url&&window.open("".concat(c.a[r["b"]].target,"/disposal/file/download?filePath=").concat(t.url,"&openStyle=inline"))},download:function(t,e){if(t){var a=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.style.display="none",i.href=a,i.id="Adownload",i.setAttribute("download",e.name),document.body.appendChild(i),i.click(),document.getElementById("Adownload").remove()}},deleteUploadItem:function(t){window.console.log(t,this.formData.fileList);var e=this.$refs["uploadObj"].uploadFiles;e.splice(e.indexOf(t),1),window.console.log(this.formData.fileList),this.formData.fileList.splice(this.formData.fileList.indexOf(t),1)},submitForm:function(t){var e=this,a=JSON.parse(JSON.stringify(p({},this.formData,{defectIds:this.defectIds,buttonCode:t,disposalProcessName:this.stage,processCode:this.processCodeOption[this.stage],orderId:this.orderId})));if("cancel"==t)return this.$emit("cancel"),!1;-1!==t?this.$refs["ruleForm"].validate((function(i){if(!i)return window.console.log("error submit!!",e.formData),!1;e.formLoading=!0,e.setRectifyProcess(a,t)})):this.setRectifyProcess(a,t)},setRectifyProcess:function(t,e){var a=this,i=Object(l["a"])({0:"保存",1:"提交"},-1,"退回");this.rectifyProcess(t).then((function(t){window.console.log(123123,t),t?(a.$message.success("".concat(a.stage," 流程").concat(i[e]||"执行","成功 ！")),a.resetForm()):a.$message.info("表单接口请求失败！")})).finally((function(){a.$emit("cancel"),a.formLoading=!1}))},resetForm:function(){this.$refs["ruleForm"].resetFields(),this.$emit("cancel")},beforeUpload:function(t){window.console.log(t,"上传校验");var e=t.name.substring(t.name.lastIndexOf(".")+1),a=["xls","xlsx","docx","pdf"],i=t.size/1024/1024<30;return a.includes(e)||this.$message({message:"上传文件只能是 xls、xlsx、docx、pdf格式!",type:"warning"}),i||this.$message({message:"上传文件大小不能超过 30MB!",type:"warning"}),a.includes(e)&&i},handleRemove:function(t,e){window.console.log(t,e)},handlePreview:function(t){window.console.log(t)},handleError:function(){this.$message.error("附件上传失败 !")},handleSuccess:function(t,e){window.console.log(t,e),Array.isArray(this.formData.fileList)&&0!==this.formData.fileList.length?this.formData.fileList.push({name:this.getFileName(Object.values(e.response.data).join(",")),url:Object.values(e.response.data).join(",")}):(this.formData.fileList=[],this.formData.fileList.push({name:this.getFileName(Object.values(e.response.data).join(",")),url:Object.values(e.response.data).join(",")})),this.$message.success("".concat(e.name," 上传成功！"))},relationData:function(){var t=this,e=function(){var e={formData:t.formData,stage:t.stage,isRectification:t.isRectification,defectIds:t.defectIds};localStorage.setItem("defectProcessInfo",JSON.stringify(e)),t.$router.push({path:"/regulationTable",query:{index:"2-2",id:t.$route.query.id,isRelation:"1",actNav:t.$route.query.actNav,params:t.$route.query.params}})};this.formData.knowledgeIds&&0!==this.formData.knowledgeIds.length?this.$confirm("当前已关联 ".concat(this.formData.knowledgeIds.length," 条需修订的法律法规/制度规范，继续关联将覆盖已选关联数据！是否继续？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e()})).catch((function(){})):e()},showKnowTable:function(){var t=this,e={knowledgeIds:this.formData.knowledgeIds};this.tableLoading=!0,this.knowTabel=[],this.getProcessReviseTable(e).then((function(e){Array.isArray(e)&&0!==e.length&&(t.knowTabel=e)})).finally((function(){t.tableLoading=!1,t.dialogTableVisible=!0}))}}},m=d,u=(a("d3d6"),a("7ae9"),a("2877")),g=Object(u["a"])(m,i,o,!1,null,"4ff55310",null);e["default"]=g.exports},"3a6d":function(t,e,a){},"7ae9":function(t,e,a){"use strict";var i=a("16b4"),o=a.n(i);o.a},"8f22":function(t,e){var a={"/portal":{target:"http://192.162.11.202:9900",changeOrigin:!0,pathRewrite:{"^/portal":"portal"}},"/api":{target:"http://192.162.100.41:11668",changeOrigin:!0,pathRewrite:{"^/api":""}},"/test":{target:"http://192.162.100.69:11668",changeOrigin:!0,pathRewrite:{"^/test":""}}};t.exports=a},d3d6:function(t,e,a){"use strict";var i=a("3a6d"),o=a.n(i);o.a},f0af:function(t,e,a){"use strict";var i=a("db49"),o=a("ab3e"),l=i["b"]+"/disposal/orders";function s(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:l})}var r=i["b"]+"/disposal/select";function n(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:r})}var c=i["b"]+"/disposal/defect/list";function f(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:c})}var p=i["b"]+"/disposal/task";function d(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:p})}var m=i["b"]+"/disposal/file/upload";function u(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:m})}var g=i["b"]+"/disposal/forensics/process";function b(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:g})}var h=i["b"]+"/disposal/monitor/exception";function w(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:h})}var v=i["b"]+"/disposal/process/detail";function x(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:v})}var y=i["b"]+"/disposal/rectify/process";function D(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:y})}var C=i["b"]+"/disposal/process/revise/selected";function O(t){return Object(o["a"])({method:"POST",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:C})}var _=i["b"]+"/disposal/file/download";function k(t){return Object(o["a"])({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,url:_})}e["a"]={data:function(){return{disposalCenter:{list:[],page:null,limit:null,total:0,model:null}}},methods:{getOrderList:function(t){return s(t).then((function(t){return t}))},getDisposalSelect:function(t){return n(t).then((function(t){return t}))},getDefectList:function(t){return f(t).then((function(t){return t}))},getDisposalTaskInfo:function(t){return d(t).then((function(t){return t}))},disposalFileUpload:function(t){return u(t).then((function(t){return t}))},forensicsProcess:function(t){return b(t).then((function(t){return t}))},getMonitorException:function(t){return w(t).then((function(t){return t}))},getProcessDetail:function(t){return x(t).then((function(t){return t}))},rectifyProcess:function(t){return D(t).then((function(t){return t}))},getProcessReviseTable:function(t){return O(t).then((function(t){return t}))},fileDownload:function(t){return k(t).then((function(t){return t}))}}}}}]);
//# sourceMappingURL=chunk-15f6e83e.ca27233a.js.map